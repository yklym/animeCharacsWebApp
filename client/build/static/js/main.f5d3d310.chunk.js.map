{"version":3,"sources":["components/myTools.js","components/HeaderLinks.js","components/IndexPage.js","components/AboutPage.js","components/RegisterPage.js","components/LoginPage.js","components/widgets/PageNavigation.js","components/user/UsersPage.js","components/widgets/ModalDelete.js","components/user/UserPage.js","components/user/updateUser.js","components/character/NewCharacterPage.js","components/character/updateCharacter.js","components/character/CharactersPage.js","components/character/CharacterPage.js","components/title/NewTitlePage.js","components/title/TitlesPage.js","components/title/TitlePage.js","index.js","components/widgets/Header.js","App.js"],"names":["updateAuth","localStorage","token","fetch","method","headers","then","res","json","data","setItem","jwtDecode","removeItem","role","_id","username","console","log","Promise","reject","getCurrUserObj","HeaderLinks","props","componentDidMount","setState","userRole","userId","state","cancel","logOutHandle","bind","ev","preventDefault","currUser","this","className","exact","activeClassName","to","onClick","Component","IndexPage","AboutPage","ErrorBlock","loginErr","passErr","LoginPage","handleSubmit","event","password1","password2","userData","body","JSON","stringify","resp","status","Error","redirect","catch","err","handleChange","target","name","value","login","fullname","type","placeholder","maxLength","onChange","required","pattern","href","password","response","message","onSubmit","for","maxlength","showPrevLink","showNextLink","pagesCount","handlePrevClick","handleNextClick","loading","currPage","id","aria-label","aria-hidden","TitleCard","user","Date","registeredAt","toDateString","TitlesPage","getPagesCount","total","denominator","valueToBeAdded","Math","floor","handlePageClick","updatedPageNo","currentPageNo","fetchSearchResults","query","renderSearchResults","results","Object","keys","length","cardsArray","map","handleOnInputChange","totalResults","totalPages","pageNumber","searchUrl","axios","CancelToken","source","get","cancelToken","resultNotFoundMsg","resUsers","pagesAmount","error","isCancel","class","PageNavigation","DeleteModal","deleteClickHandler","targetApiUrl","returnLink","tabIndex","aria-labelledby","data-dismiss","entityName","CharacterPage","pageUserId","queryStrArr","location","pathname","split","src","image","alt","data-toggle","data-target","UpdateUserPage","targetUser","tgLogin","chatId","imageUrl","subscribes","formData","FormData","append","handleFileInput","e","files","Array","from","URL","createObjectURL","cancelUpdateHandler","characId","fileInput","React","createRef","undefined","row","encType","htmlFor","ref","CreateCharacterPage","description","characDescr","age","alias","characPic","min","max","UpdateCharacterPage","onFilesError","file","code","prevChar","character","charac","CharacterCard","characImg","characName","CharactersPage","resCharacs","isAdmin","action","handleSubscription","handleUnSubscription","renderTgButton","subscribers","includes","addedAt","ModalDelete","titleImg","title","titleName","titleId","resTitles","AdminTableElement","addCharClickHandler","rerender","deleteCharClickHandler","post","titles","style","display","AdminTable","rerenderTable","characters","width","cellSpacing","TitlePage","yearOfPublishing","reting","ReactDOM","render","path","component","RegisterPage","CreateTitlePage","UserPage","UsersPage","document","getElementById"],"mappings":"yTAKO,SAASA,IAEZ,OAAIC,aAAaC,MASVC,MAAM,0BAA2B,CACpCC,OAAQ,MACRC,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,UACrCI,MAAK,SAAAC,GACN,OAAOA,EAAIC,UACdF,MAAK,SAAAG,GACF,OAAGA,EAAKP,OACJD,aAAaS,QAAQ,QAASD,EAAKP,OACzBS,IAAUV,aAAaC,SAGjCD,aAAaW,WAAW,SACjB,CACHC,KAAO,KACPC,IAAM,KACNC,SAAW,WAxBvBC,QAAQC,IAAI,iBACLC,QAAQC,OAAQ,CACfN,KAAO,KACPC,IAAM,KACNC,SAAW,QA+BpB,SAASK,IAER,OAAInB,aAAaC,OAGbc,QAAQC,IAAI,WACZD,QAAQC,IAAIN,IAAUV,aAAaC,QAC5BS,IAAUV,aAAaC,QAJvB,G,ICkCFmB,E,YAzEb,WAAaC,GAAS,IAAD,8BACjB,4CAAOA,KAWTC,kBAAoB,WAClBvB,IAAaM,MAAK,SAAAC,GACd,EAAKiB,SAAS,CACVC,SAAWlB,EAAIM,KACfE,SAAWR,EAAIQ,SACfW,OAASnB,EAAIO,UAdrB,EAAKa,MAAQ,CACTF,SAAW,KACXV,SAAW,KACXW,OAAS,MAEb,EAAKE,OAAS,GACd,EAAKC,aAAc,EAAKA,aAAaC,KAAlB,gBATF,E,0EAsBNC,GACTA,EAAGC,iBAEH/B,aAAaW,WAAW,SACxB,IAAIqB,EAAWjC,IAEfkC,KAAKV,SAAS,CACZC,SAAWQ,EAASpB,KACpBE,SAAWkB,EAASlB,SACpBW,OAASO,EAASnB,Q,+BAKtB,OAA2B,IAAxBoB,KAAKP,MAAMF,SAEV,yBAAKU,UAAU,SACX,kBAAC,IAAD,CAASC,OAAK,EAACD,UAAU,UAAWE,gBAAgB,iBAAkBC,GAAG,KAAzE,QACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,UAAWE,gBAAgB,iBAAiBC,GAAG,UAAxE,SACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,UAAvE,SACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,eAAvE,cACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,WAAvE,UAEA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,gBAAgBG,GAAG,IAAIC,QAASL,KAAKL,cAA9D,WACA,kBAAC,IAAD,CAASO,OAAK,EAACD,UAAU,gBAAgBG,GAAE,iBAAYJ,KAAKP,MAAMD,SAAWQ,KAAKP,MAAMZ,WAG5D,IAAxBmB,KAAKP,MAAMF,SAEf,yBAAKU,UAAU,SACX,kBAAC,IAAD,CAASC,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,KAAvE,QACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,UAAvE,SACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,WAAvE,UACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,eAAvE,cAEA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,gBAAgBG,GAAG,IAAIC,QAASL,KAAKL,cAA9D,WACA,kBAAC,IAAD,CAASO,OAAK,EAACD,UAAU,gBAAgBG,GAAE,iBAAYJ,KAAKP,MAAMD,SAAWQ,KAAKP,MAAMZ,WAI5F,yBAAKoB,UAAU,SACX,kBAAC,IAAD,CAASC,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,KAAvE,QACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,UAAUE,gBAAgB,iBAAiBC,GAAG,UAAvE,SAEA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,gBAAgBE,gBAAgB,iBAAiBC,GAAG,eAA7E,UACA,kBAAC,IAAD,CAASF,OAAK,EAACD,UAAU,gBAAgBE,gBAAgB,iBAAiBC,GAAG,kBAA7E,gB,GApEME,aC8BXC,E,iLA3BX,OADAzB,QAAQC,IAAI,wBACL,6BACH,kBAAC,EAAD,MACA,8BAEA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,yDACA,+D,GAvBgBuB,a,IC2BTE,E,iLA3BX,OAAO,6BACL,kBAAC,EAAD,MACE,8BAEA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,+CACA,qD,GAtBgBF,a,QCClBG,E,iLAGI,OAAO,yBAAKR,UAAU,sBAChB,gCACE,6CACF,4BACGD,KAAKZ,MAAMsB,SAAW,mDAA+B,qCACrDV,KAAKZ,MAAMuB,QAAW,uDAAmC,4C,GARnDL,aAsIRM,E,YAtHb,WAAaxB,GAAS,IAAD,8BACjB,4CAAOA,KAeTyB,aAAe,SAAAC,GAIb,GAFAA,EAAMhB,iBAEH,EAAKL,MAAMsB,YAAc,EAAKtB,MAAMuB,UAGrC,OAFAlC,QAAQC,IAAI,uBACZ,EAAKO,SAAS,CAACqB,SAAS,IAG1B7B,QAAQC,IAAI,sBAEZ,IAAMkC,EAAW,EAAKxB,MAEtB,OAAOxB,MAAM,wBAAyB,CAClCC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElB+C,KAAMC,KAAKC,UAAUH,KAEtB7C,MAAK,SAAAiD,GAEJ,GADAvC,QAAQC,IAAIsC,GACO,MAAhBA,EAAKC,OAGN,MAFA,EAAKhC,SAAS,CAACoB,UAAW,IAC1B5B,QAAQC,IAAI,eACN,IAAIwC,MAAM,uBAEhB,EAAKjC,SAAS,CAACkC,UAAU,OAE5BC,OAAM,SAAAC,GAAM5C,QAAQC,IAAI2C,OA7CV,EAgDrBC,aAAe,SAAAb,GAAU,IAAD,EACpB,EAAKxB,UAAL,mBACCwB,EAAMc,OAAOC,KAAOf,EAAMc,OAAOE,OADlC,0BAES,GAFT,yBAGQ,GAHR,KA/CA,EAAKrC,MAAQ,CACXsC,MAAO,GACPC,SAAU,GACVjB,UAAW,GACXC,UAAW,GACXQ,UAAU,EACVd,UAAU,EACVC,SAAS,GAEX,EAAKE,aAAe,EAAKA,aAAajB,KAAlB,gBAXH,E,sEA2DjB,OAAGI,KAAKP,MAAM+B,UACV1C,QAAQC,IAAI,kCACL,kBAAC,IAAD,CAAUqB,GAAG,OAEb,6BACL,kBAAC,EAAD,MACF,0BAAMH,UAAU,iBAEhB,0BAAMA,UAAW,YACb,yBAAKA,UAAU,aACb,wCACA,6EAEA,6BAEA,+BACI,oCACA,2BAAOgC,KAAK,OAAOC,YAAY,cAAcC,UAAU,KAAKN,KAAK,QAAQC,MAAO9B,KAAKP,MAAMsC,MAAOK,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,gEAIpJ,+BACI,uCACA,2BAAOL,KAAK,OAAOC,YAAY,iBAAiBC,UAAU,KAAKN,KAAK,WAAWC,MAAO9B,KAAKP,MAAMuC,SAAUI,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,0BAI7J,+BACI,uCACD,2BAAOL,KAAK,WAAWC,YAAY,iBAAiBC,UAAU,KAAKN,KAAK,YAAYC,MAAO9B,KAAKP,MAAMsB,UAAYqB,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,gEAGlK,+BACG,uCACJ,2BAAOL,KAAK,WAAWC,YAAY,iBAAiBC,UAAU,KAAKN,KAAK,YAAYC,MAAO9B,KAAKP,MAAMuB,UAAWoB,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,gEAI/J,6BACEtC,KAAKP,MAAMiB,UAAYV,KAAKP,MAAMkB,QAClC,kBAAC,EAAD,CAAYD,SAAUV,KAAKP,MAAMiB,SAAUC,QAASX,KAAKP,MAAMkB,UAC/D,qCAEF,6BAEA,sEAA2C,uBAAG4B,KAAK,KAAR,mBAA3C,KACA,4BAAQN,KAAK,SAAShC,UAAU,cAAcI,QAAUL,KAAKa,cAA7D,aAGF,yBAAKZ,UAAU,oBACb,uDAA4B,kBAAC,IAAD,CAAMG,GAAG,eAAT,WAA5B,a,GA9GME,aC4EPM,E,YAzFb,WAAaxB,GAAS,IAAD,8BACjB,4CAAOA,KAWTyB,aAAe,SAAAC,GACbA,EAAMhB,iBACNhB,QAAQC,IAAI,sBAEZ,IAAMkC,EAAW,CAAEpC,SAAU,EAAKY,MAAMZ,SAAU2D,SAAS,EAAK/C,MAAM+C,UAEtE,OAAOvE,MAAM,qBAAsB,CAC/BC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElB+C,KAAMC,KAAKC,UAAUH,KAEtB7C,MAAK,SAAAiD,GAEJ,OADAvC,QAAQC,IAAIsC,GACLA,EAAK/C,UAEbF,MAAK,SAAAG,GACFO,QAAQC,IAAI,SACZD,QAAQC,IAAIR,EAAKkE,SAASzE,OACxBO,EAAKmE,UAGL3E,aAAaS,QAAQ,QAASD,EAAKkE,SAASzE,OAC5C,EAAKsB,SAAS,CAACkC,UAAU,QAE5BC,OAAM,SAAAC,GAAM5C,QAAQC,IAAI2C,OAtCZ,EAyCrBC,aAAe,SAAAb,GACX,EAAKxB,SAAL,eAAgBwB,EAAMc,OAAOC,KAAOf,EAAMc,OAAOE,SAxCjD,EAAKrC,MAAQ,CACXZ,SAAU,GACV2D,SAAU,GACVhB,UAAU,GAEZ,EAAKX,aAAe,EAAKA,aAAajB,KAAlB,gBAPH,E,sEAiDjB,OADAd,QAAQC,IAAI,wBACTiB,KAAKP,MAAM+B,UACV1C,QAAQC,IAAI,+BACL,kBAAC,IAAD,CAAUqB,GAAG,OAMb,6BACP,kBAAC,EAAD,MACA,0BAAMH,UAAU,iBAEZ,0BAAMA,UAAW,WAAW0C,SAAU3C,KAAKa,cACvC,yBAAKZ,UAAU,aACX,qCACA,iEACA,6BAEA,2BAAO2C,IAAI,SAAQ,qCACnB,2BAAOX,KAAK,OAAOC,YAAY,cAAcL,KAAK,WAAWgB,UAAU,KACvER,UAAQ,EACRP,MAAO9B,KAAKP,MAAMZ,SAClBuD,SAAUpC,KAAK2B,eAEf,2BAAOiB,IAAI,OAAM,wCAEjB,2BAAOX,KAAK,WAAWC,YAAY,iBAAiBW,UAAU,KAAKhB,KAAK,WACxEC,MAAO9B,KAAKP,MAAM+C,SAClBJ,SAAUpC,KAAK2B,aACfU,UAAQ,IAEZ,4BAAQJ,KAAK,SAAShC,UAAU,eAAhC,iB,GAjFIK,a,gBCFT,WAAClB,GAAW,IAEnB0D,EAOG1D,EAPH0D,aACMC,EAMH3D,EANG2D,aACAC,EAKH5D,EALG4D,WACNC,EAIG7D,EAJH6D,gBACAC,EAGG9D,EAHH8D,gBACMC,EAEH/D,EAFG+D,QACAC,EACHhE,EADGgE,SAGN,OAAIJ,EAID,wBAAI/C,UAAU,6CAA6CoD,GAAK,gBACjE,wBAAIpD,UAAU,aACV,uBAAGA,UAAS,mBAAe6C,EAAe,GAAK,YAAnC,OAAiDK,EAAU,aAAe,IAAM9C,QAAS4C,EAAiBK,aAAW,YAC/H,0BAAMC,cAAY,QAAlB,QACA,0BAAMtD,UAAU,WAAhB,cAIR,wBAAIA,UAAU,wCAAuC,uBAAGA,UAAU,aAAamD,EAA1B,IAAqCJ,IAEtF,wBAAI/C,UAAU,aACZ,uBAAGA,UAAS,kBAAc8C,EAAe,GAAK,aAAlC,OAAiDI,EAAU,aAAe,IAAO9C,QAAS6C,EAAiBI,aAAW,QAChI,0BAAMC,cAAY,QAAlB,QACA,0BAAMtD,UAAU,WAAhB,YAhBNnB,QAAQC,IAAI,WACL,gCCTXyE,E,iLAEE,OAAO,4BACP,kBAAC,IAAD,CAAMpD,GAAE,iBAAYJ,KAAKZ,MAAMqE,KAAK7E,MAAO,4BAAKoB,KAAKZ,MAAMqE,KAAK1B,QAChE,4BAAK/B,KAAKZ,MAAMqE,KAAKzB,UACrB,4BAAK,IAAI0B,KAAK1D,KAAKZ,MAAMqE,KAAKE,cAAcC,qB,GAL5BtD,aA8KTuD,E,YAlKb,WAAazE,GAAS,IAAD,uBACnB,4CAAOA,KAmBT0E,cAAgB,SAACC,EAAOC,GACtB,IACMC,EADYF,EAAQC,IAAgB,EACP,EAAI,EACvC,OAAOE,KAAKC,MAAMJ,EAAQC,GAAeC,GAvBtB,EA0BrBG,gBAAkB,SAACnC,GACjB,IAAMoC,EACE,SAAWpC,EACP,EAAKxC,MAAM6E,cAAgB,EAC3B,EAAK7E,MAAM6E,cAAgB,EAClC,EAAK7E,MAAM0D,SACd,EAAK7D,SAAS,CAAE6D,SAAS,EAAMT,QAAS,KAAM,WAC5C,EAAK6B,mBAAmBF,EAAe,EAAK5E,MAAM+E,WAjCnC,EAsCrBC,oBAAsB,WACpB3F,QAAQC,IAAI,EAAKU,MAAMiF,SADG,MAED,EAAKjF,MAAvBiF,EAFmB,EAEnBA,QAASF,EAFU,EAEVA,MAGhB,GAFA1F,QAAQC,IAAI2F,GAERA,GAAWC,OAAOC,KAAKF,GAASG,QAAUH,EAAQG,OAAQ,CAE5D,IAAMC,EAAaJ,EAAQK,KAAI,SAAAtB,GAC7B,OAAO,kBAAC,EAAD,CAAWA,KAAQA,OAE5B,OAAO,+BAAQqB,GAGb,OAAO,yBAAK7E,UAAU,uBACtB,gDAAqB,oCAAUuE,MApDhB,EA6DrBQ,oBAAsB,SAAClE,GACrB,IAAM0D,EAAQ1D,EAAMc,OAAOE,MACtB0C,EAIH,EAAKlF,SAAS,CAAEkF,QAAOrB,SAAS,EAAMT,QAAS,KAAM,WACnD,EAAK6B,mBAAmB,EAAGC,OAJ7B,EAAKlF,SAAS,CAAEkF,QAAOE,QAAS,GAAIO,aAAc,EAAGC,WAAY,EAAGZ,cAAe,EAAG5B,QAAS,KAC/F,EAAK6B,mBAAmB,EAAGC,KAjEV,EA0ErBD,mBAAqB,SAACY,EAAYX,GAElC,IAAMY,EAAS,6BADbD,EAAaA,GAAc,GACd,OAAsCX,EAAM,WAAD,OAAaA,GAAU,IAC7E,EAAK9E,QACP,EAAKA,OAAOA,SAGf,EAAKA,OAAS2F,IAAMC,YAAYC,SAChCF,IACEG,IAAIJ,EAAW,CACZK,YAAa,EAAK/F,OAAO1B,MACzBG,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGrBI,MAAK,SAACC,GACHS,QAAQC,IAAIV,GACf,IAAMqH,EAAqBrH,EAAIE,KAAKoH,SAASd,OAEtC,GADJ,6DAEH,EAAKvF,SAAS,CACTgF,cAAgBa,EAChBT,QAASrG,EAAIE,KAAKoH,SAClB3C,WAAY3E,EAAIE,KAAKqH,YACzBlD,QAASgD,EACTvC,SAAS,OAGV1B,OAAM,SAACoE,IACHR,IAAMS,SAASD,IAAUA,IAC5B,EAAKvG,SAAS,CACb6D,SAAS,EACTT,QAAS,qDAxGV,IAAI3C,EAAWb,IAHI,OAKnB,EAAKO,MAAQ,CACX+E,MAAO,GACPE,QAAS,GACTmB,MAAO,GACPnD,QAAS,GACTS,SAAS,EACT8B,aAAc,EACdjC,WAAY,EACZsB,cAAe,EACf/E,SAAUQ,EAASpB,KACnBE,SAAUkB,EAASlB,UAErB,EAAKa,OAAS,GAjBK,E,iFA0DnBM,KAAKuE,mBAAmB,EAAG,M,+BAwDnB,IAAD,SAEyDvE,KAAKP,MAA7D+E,EAFD,EAECA,MAAOrB,EAFR,EAEQA,QAAUmB,EAFlB,EAEkBA,cAAetB,EAFjC,EAEiCA,WAAYzD,EAF7C,EAE6CA,SAC9CuD,EAAe,EAAIwB,EACnBvB,EAAeC,EAAasB,EAClC,OAAgB,IAAb/E,GAA+B,IAAbA,EACZ,kBAAC,IAAD,CAAUa,GAAG,gBAGf,6BACP,kBAAC,EAAD,MACF,8BACA,2BAAO6B,KAAK,OAAOJ,KAAK,SAASC,MAAO0C,EAAOnB,GAAG,eAAepD,UAAW,eAAeiC,YAAY,WAAWE,SAAUpC,KAAKgF,sBAC/H,yBAAKe,MAAM,SACT,+BACE,+BACA,wBAAIA,MAAM,cACR,qCACA,wCACA,2CAGA/F,KAAKyE,wBAIR,kBAACuB,EAAD,CACC7C,QAASA,EACTL,aAAcA,EACdC,aAAcA,EACdK,SAAYkB,EACZtB,WAAcA,EACdC,gBAAiB,kBAAM,EAAKmB,gBAAgB,SAC5ClB,gBAAiB,kBAAM,EAAKkB,gBAAgB,WACtB,IAAvBpE,KAAKP,MAAMF,SACX,yBAAKU,UAAU,gBACZ,+CAEE,4BAAQgC,KAAK,SAAShC,UAAU,gBAAhC,sBAEA,4BAAQgC,KAAK,SAAShC,UAAU,mBAAhC,0BAES,2C,GA7JIK,aC8DV2F,E,YAvEb,WAAa7G,GAAS,IAAD,8BACnB,4CAAOA,KAQT8G,mBAAqB,SAAApF,GACnB,EAAKyD,sBAVc,EAerBA,mBAAqB,WAEnB,IAAMa,EAAY,EAAKhG,MAAM+G,aAEzB,EAAKzG,QACP,EAAKA,OAAOA,SAEd,EAAKA,OAAS2F,IAAMC,YAAYC,SAChCtH,MAAMmH,EAAW,CACflH,OAAS,SACTC,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,UACvCI,MAAK,SAACC,GAEN,EAAKiB,SAAS,CACbkC,UAAU,QA3BhB,EAAK/B,MAAQ,CACX+B,UAAS,GAEX,EAAK9B,OAAO,GANO,E,sEAoCjB,OAAGM,KAAKP,MAAM+B,SACL,kBAAC,IAAD,CAAUpB,GAAIJ,KAAKZ,MAAMgH,aAG3B,yBAAKnG,UAAU,aAAaoD,GAAG,qBAAqBgD,SAAS,KAAK1H,KAAK,SAAS2H,kBAAgB,0BAA0B/C,cAAY,QAC/I,yBAAKtD,UAAU,qCAAqCtB,KAAK,YACvD,yBAAKsB,UAAU,iBACb,yBAAKA,UAAU,gBACb,wBAAIA,UAAU,cAAcoD,GAAG,yBAA/B,kBAEA,4BAAQpB,KAAK,SAAShC,UAAU,QAAQsG,eAAa,QAAQjD,aAAW,SACtE,0BAAMC,cAAY,QAAlB,UAIF,yBAAKtD,UAAU,cAAf,0BAC0BD,KAAKZ,MAAMoH,WADrC,KAGA,yBAAKvG,UAAU,gBAEf,4BAAQgC,KAAK,SAAShC,UAAU,oBAAoBsG,eAAa,SAAjE,UAEA,6BAEI,2BAAOtE,KAAK,SAASJ,KAAK,cAAc0E,eAAa,QAAQtG,UAAU,iBAAgB6B,MAAM,cAAczB,QAASL,KAAKkG,8B,GA7D7G5F,aCuJXmG,E,YAtJX,WAAarH,GAAS,IAAD,uBACjB,4CAAOA,KAeTC,kBAAoB,WAChB,EAAKkF,sBAjBU,EAoBnBA,mBAAqB,WACnB,IAAMa,EAAS,wBAAoB,EAAK3F,MAAMiH,YAE1C,EAAKhH,QACP,EAAKA,OAAOA,SAGd,EAAKA,OAAS2F,IAAMC,YAAYC,SAChCF,IACGG,IAAIJ,EAAW,CACdK,YAAa,EAAK/F,OAAO1B,MACzBG,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGnBI,MAAK,SAACC,GACJ,EAAKiB,SAAS,CACbmE,KAAMpF,EAAIE,WAnChB,IAAIoI,EAAc,EAAKvH,MAAMwH,SAASC,SAASC,MAAM,KACjDJ,EAAaC,EAAYA,EAAY9B,OAAS,GAE9C9E,EAAWb,IANE,OAOjB,EAAKO,MAAQ,CACXiH,WAAaA,EACbnH,SAAWQ,EAASpB,KACpBa,OAASO,EAASnB,IAClBC,SAAWkB,EAASlB,UAEtB,EAAKa,OAAO,GAbK,E,sEA8CnB,IAAIM,KAAKP,MAAMD,OACX,OAAO,kBAAC,IAAD,CAAUY,GAAG,MAE1B,IAAIJ,KAAKP,MAAMgE,KACb,OAAO,6BAAK,sCAEd,IAAMA,EAAOzD,KAAKP,MAAMgE,KAExB,OAAO,6BACL,kBAAC,EAAD,MACF,8BACI,yBAAKxD,UAAU,wBAEf,yBAAKA,UAAU,qBACX,yBAAK8G,IAAKtD,EAAKuD,MAAOC,IAAI,MAG9B,yBAAKhH,UAAU,oBACX,yBAAKA,UAAU,SACX,+BACE,+BAEE,4BACI,yCACA,4BAAKwD,EAAKzB,WAEd,4BACI,sCACA,4BAAKyB,EAAK1B,QAEd,4BACI,kDACA,4BAAK,IAAI2B,KAAKD,EAAKE,cAAcC,oBAM7C,yBAAK3D,UAAU,SACX,+BACE,+BACE,4BACI,0CACA,4BAAKwD,EAAK9E,KACJ,QACA,SAEV,4BACI,qCACA,oCAEJ,4BACI,qCACA,yCAOfqB,KAAKP,MAAMiH,aAAejD,EAAK7E,IAC9B,yBAAKqB,UAAU,gBACjB,sCAGE,kBAAC,IAAD,CAAMA,UAAU,kBAAkBG,GAAE,sBAAiBqD,EAAK7E,MAA1D,gBAEA,qCAGuB,IAAxBoB,KAAKP,MAAMF,SACV,yBAAKU,UAAU,gBACjB,8CAGA,4BAAQgC,KAAK,SAAShC,UAAU,iBAAiBiH,cAAY,QAAQC,cAAY,uBAAjF,iBAEiB,IAAd1D,EAAK9E,KACL,4BAAQsD,KAAK,SAAS8D,MAAM,mBAA5B,cACA,4BAAQ9D,KAAK,SAAS8D,MAAM,mBAA5B,aAGD,kBAAC,IAAD,CAAM9F,UAAU,kBAAkBG,GAAE,sBAAiBqD,EAAK7E,MAA1D,gBAEA,2C,GApIkB0B,aC8Jb8G,E,YAhKX,WAAahI,GAAS,IAAD,8BACjB,4CAAOA,KA0CXyB,aAAe,SAAAC,GACXA,EAAMhB,iBAEN,IAAMmB,EAAW,CACbuB,SAAW,EAAK/C,MAAM4H,WAAW7E,SACjCmB,aAAe,EAAKlE,MAAM4H,WAAW1D,aACrC3B,SAAU,EAAKvC,MAAMuC,SACrBD,MAAO,EAAKtC,MAAMsC,MAClBuF,QAAU,EAAK7H,MAAM6H,QACrBC,OAAS,EAAK9H,MAAM8H,OACpBP,MAAO,EAAKvH,MAAMuH,MAClBQ,SAAW,EAAK/H,MAAM+H,SACtBC,WAAa,EAAKhI,MAAMgI,YAGtBC,EAAY,IAAIC,SAEtB,IAAI,IAAM9F,KAAQZ,EACdyG,EAASE,OAAO/F,EAAMZ,EAASY,IAGnC,OAAO5D,MAAM,iBAAD,OAAkB,EAAKwB,MAAM4H,WAAWzI,KAAO,CACvDV,OAAQ,MACRC,QAAS,CACT,cAAgB,UAAhB,OAA2BJ,aAAaC,QAExCkD,KAAMwG,IACPtJ,MAAK,SAAAiD,GACJ,OAAOA,EAAK/C,UAEbF,MAAK,SAAAG,GACF,EAAKe,SAAS,CAACkC,SAAUjD,EAAKK,SAC/B6C,OAAM,SAAAC,GAAM5C,QAAQC,IAAI2C,OA3EZ,EA8EvBC,aAAe,SAAAb,GACX,EAAKxB,SAAL,eAAgBwB,EAAMc,OAAOC,KAAOf,EAAMc,OAAOE,SA/E9B,EAkFvB+F,gBAAkB,SAAAC,GACd,IAAMC,EAAQC,MAAMC,KAAKH,EAAElG,OAAOmG,OAClC,EAAKzI,SAAS,CACZ0H,MAAQe,EAAM,GACdP,SAAWU,IAAIC,gBAAgBJ,EAAM,OAtFpB,EA0FvBK,oBAAsB,WAClB,EAAK9I,SAAS,CAACkC,SAAS,GAAD,OAAK,EAAK/B,MAAM4I,aAxFrC,EAAKC,UAAYC,IAAMC,YAEvB,EAAK/I,MAAQ,CACXsC,MAAO,GACPC,SAAU,GACVgF,WAAOyB,GAET,EAAK5H,aAAe,EAAKA,aAAajB,KAAlB,gBAVH,E,iFAeD,IAAD,OACX+G,EAAc3G,KAAKZ,MAAMwH,SAASC,SAASC,MAAM,KACjDtH,EAASmH,EAAYA,EAAY9B,OAAS,GAExCO,EAAS,wBAAoB5F,GAEnCvB,MAAMmH,EAAW,CACblH,OAAQ,MACRC,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAEjBI,MAAK,SAAAsK,GAAG,OAAEA,EAAIpK,UAChBF,MAAK,SAACC,GACJ,EAAKiB,SAAS,CACb+H,WAAYhJ,EACZiJ,QAASjJ,EAAIiJ,QACbvF,MAAO1D,EAAI0D,MACXC,SAAU3D,EAAI2D,SACdwF,SAAWnJ,EAAI2I,MACfO,OAASlJ,EAAIkJ,OACbE,WAAapJ,EAAIoJ,gBAGpBhG,OAAM,SAACoE,S,+BAwDd,OAAG7F,KAAKP,MAAM+B,SACH,kBAAC,IAAD,CAAUpB,GAAE,iBAAYJ,KAAKP,MAAM+B,YAGvC,iCAAM,kBAAC,EAAD,MACX,8BACF,0BAAMvB,UAAW,kBAAkB0I,QAAQ,sBAAsBhG,SAAU3C,KAAKa,cAChF,yBAAKZ,UAAU,wBAEf,yBAAKA,UAAU,kBAEX,yBAAKA,UAAU,cACX,2CAEI,2BAAOgC,KAAK,OAAOhC,UAAU,eAAe6B,MAAO9B,KAAKP,MAAMuC,SAAUH,KAAK,WAAWO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,2BAIlJ,yBAAKrC,UAAU,cACX,wCACI,2BAAOgC,KAAK,OAAQhC,UAAU,eAAe6B,MAAO9B,KAAKP,MAAMsC,MAAOF,KAAK,QAAQO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,iEAGzI,yBAAKrC,UAAU,cACX,kDACI,2BAAOgC,KAAK,OAAQhC,UAAU,eAAe6B,MAAO9B,KAAKP,MAAM6H,QAASzF,KAAK,UAAUO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,kEAajJ,yBAAKrC,UAAU,kBACN,yCACA,4BAAQgC,KAAK,SAAShC,UAAU,gBAC7B,2BAAO2I,QAAQ,0BAAf,kBAEH,6BACG,yBAAK3I,UAAU,mBAAmB8G,IAAK/G,KAAKP,MAAM+H,SAAUP,IAAI,MAGnE,2BAAOhF,KAAK,OAAOJ,KAAK,YAAYwB,GAAG,yBAAyBwF,IAAK7I,KAAKsI,UAAWlG,SAAUpC,KAAK6H,gBAAiB5H,UAAU,sBAKpI,6BACA,6BAEA,2BAAOgC,KAAK,SAAShC,UAAU,kBAAkB6B,MAAM,gBACvD,2BAAOG,KAAK,SAAShC,UAAU,oBAAoB6B,MAAM,SAASzB,QAAWL,KAAKoI,6B,GAxJzD9H,aCyJdwI,E,YAxJX,WAAa1J,GAAS,IAAD,8BACjB,4CAAOA,KAiBXyB,aAAe,SAAAC,GACXA,EAAMhB,iBAENhB,QAAQC,IAAI,sBAEZ,IAAMkC,EAAW,CAAEY,KAAM,EAAKpC,MAAMoC,KAChCG,SAAS,EAAKvC,MAAMuC,SACpB+G,YAAY,EAAKtJ,MAAMuJ,YACvBC,IAAK,EAAKxJ,MAAMwJ,IAChBC,MAAQ,EAAKzJ,MAAMyJ,MACnBC,UAAW,EAAK1J,MAAMuH,OAC1BlI,QAAQC,IAAIkC,GAEZ,IAAMyG,EAAY,IAAIC,SAEtB,IAAI,IAAM9F,KAAQZ,EACdyG,EAASE,OAAO/F,EAAMZ,EAASY,IAGnC,OAAO5D,MAAM,qBAAsB,CAC/BC,OAAQ,OACRC,QAAS,CACb,cAAgB,UAAhB,OAA2BJ,aAAaC,QAEpCkD,KAAMwG,IACPtJ,MAAK,SAAAiD,GAEJ,OADAvC,QAAQC,IAAIsC,GACLA,EAAK/C,UAEbF,MAAK,SAAAG,GACFO,QAAQC,IAAI,SACZD,QAAQC,IAAIR,GAEZ,EAAKe,SAAS,CAACkC,SAAUjD,EAAKK,SAE/B6C,OAAM,SAAAC,GAAM5C,QAAQC,IAAI2C,OArDZ,EAwDvBC,aAAe,SAAAb,GACX,EAAKxB,SAAL,eAAgBwB,EAAMc,OAAOC,KAAOf,EAAMc,OAAOE,QACjDhD,QAAQC,IAAI,kBACZD,QAAQC,IAAI,EAAKU,QA3DE,EA6DvBoI,gBAAkB,SAAAC,GAEd,IAAMC,EAAQC,MAAMC,KAAKH,EAAElG,OAAOmG,OAClCjJ,QAAQC,MACR,EAAKO,SAAS,CAAC0H,MAAQe,EAAM,GACfP,SAAWU,IAAIC,gBAAgBJ,EAAM,OAhEjD,EAAKO,UAAYC,IAAMC,YACvB,EAAK/I,MAAQ,CACXoC,KAAM,GACNG,SAAU,GACVgH,YAAa,8BACbC,KAAM,EACNC,MAAO,GACPlC,WAAOyB,EACPjB,SAAU,IAEZ,EAAK3G,aAAe,EAAKA,aAAajB,KAAlB,gBAZH,E,sEAgFjB,OADAd,QAAQC,IAAI,6BACTiB,KAAKP,MAAM+B,UACV1C,QAAQC,IAAI,+BACL,kBAAC,IAAD,CAAUqB,GAAE,sBAAiBJ,KAAKP,MAAM+B,aAG5C,iCAAM,kBAAC,EAAD,MACX,8BACF,0BAAMvB,UAAW,kBAAkB0I,QAAQ,sBAAsBhG,SAAU3C,KAAKa,cAChF,yBAAKZ,UAAU,wBAEf,yBAAKA,UAAU,kBAEX,yBAAKA,UAAU,cACX,uCAEI,2BAAOgC,KAAK,OAAOhC,UAAU,eAAeiC,YAAY,aAAaL,KAAK,OAAOO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,iEAI3I,yBAAKrC,UAAU,cACX,4CACI,2BAAOgC,KAAK,OAAQhC,UAAU,eAAeiC,YAAY,iBAAiBL,KAAK,WAAWO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,iEAKhJ,yBAAKrC,UAAU,cACX,sCACI,2BAAOgC,KAAK,SAASmH,IAAI,IAAIC,IAAI,UAAUxH,KAAK,MAAMC,MAAO9B,KAAKP,MAAMwJ,IAAK7G,SAAUpC,KAAK2B,aAAcU,UAAQ,MAI1H,yBAAKpC,UAAU,cACX,wCACI,2BAAOgC,KAAK,OAAQhC,UAAU,eAAeiC,YAAY,cAAcL,KAAK,QAAQO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,kEAK9I,yBAAKrC,UAAU,kBACN,+CACA,8BAAU4B,KAAK,cAAcC,MAAO9B,KAAKP,MAAMuJ,YAAc5G,SAAUpC,KAAK2B,gBAGrF,yBAAK1B,UAAU,kBACN,yCACA,4BAAQgC,KAAK,SAAShC,UAAU,gBAC7B,2BAAO2I,QAAQ,0BAAf,kBAEH,6BACG,yBAAK3I,UAAU,mBAAmB8G,IAAK/G,KAAKP,MAAM+H,SAAUP,IAAI,MAGnE,2BAAOhF,KAAK,OAAOJ,KAAK,aAAawB,GAAG,yBAAyBwF,IAAK7I,KAAKsI,UAAWlG,SAAUpC,KAAK6H,gBAAiB5H,UAAU,sBAQrI,6BACA,6BACJ,2BAAOgC,KAAK,SAAShC,UAAU,kBAAkB6B,MAAM,gC,GAhJzBxB,aCyMnBgJ,E,YAxMX,WAAalK,GAAS,IAAD,8BACjB,4CAAOA,KAoDXmK,aAAgB,SAAC1D,EAAO2D,GACpB1K,QAAQC,IAAI,cAAgB8G,EAAM4D,KAAO,KAAO5D,EAAMnD,UAtDrC,EA2DrB7B,aAAe,SAAAC,GACXA,EAAMhB,iBAENhB,QAAQC,IAAI,sBACZD,QAAQC,IAAI,EAAKU,OACjB,IAAMwB,EAAW,CAAEY,KAAM,EAAKpC,MAAMoC,KAChCG,SAAS,EAAKvC,MAAMuC,SACpBgH,YAAY,EAAKvJ,MAAMuJ,YACvBC,IAAK,EAAKxJ,MAAMwJ,IAChBjC,MAAO,EAAKvH,MAAMuH,MAClB+B,YAAa,EAAKtJ,MAAMuJ,YACxBE,MAAM,EAAKzJ,MAAMyJ,MACjB1B,SAAW,EAAK/H,MAAM+H,SACtBkC,SAAW,EAAKjK,MAAMkK,WAE1B7K,QAAQC,IAAIkC,GAEZ,IAAMyG,EAAY,IAAIC,SAEtB,IAAI,IAAM9F,KAAQZ,EACdyG,EAASE,OAAO/F,EAAMZ,EAASY,IAGnC,OAAO5D,MAAM,sBAAD,OAAuB,EAAKwB,MAAM4I,UAAY,CACtDnK,OAAQ,MACRC,QAAS,CACT,cAAgB,UAAhB,OAA2BJ,aAAaC,QAExCkD,KAAMwG,IACPtJ,MAAK,SAAAiD,GAEJ,OADAvC,QAAQC,IAAIsC,GACLA,EAAK/C,UAEbF,MAAK,SAAAG,GACFO,QAAQC,IAAI,SACZD,QAAQC,IAAIR,GAEZ,EAAKe,SAAS,CAACkC,SAAUjD,EAAKK,SAE/B6C,OAAM,SAAAC,GAAM5C,QAAQC,IAAI2C,OAlGZ,EAqGvBC,aAAe,SAAAb,GACX,EAAKxB,SAAL,eAAgBwB,EAAMc,OAAOC,KAAOf,EAAMc,OAAOE,QACjDhD,QAAQC,IAAI,kBACZD,QAAQC,IAAI,EAAKU,QAxGE,EA4GvBoI,gBAAkB,SAAAC,GAEd,IAAMC,EAAQC,MAAMC,KAAKH,EAAElG,OAAOmG,OAClC,EAAKzI,SAAS,CACZ0H,MAAQe,EAAM,GACdP,SAAWU,IAAIC,gBAAgBJ,EAAM,OAjHpB,EAqHvBK,oBAAsB,WAClB,EAAK9I,SAAS,CAACkC,SAAS,GAAD,OAAK,EAAK/B,MAAM4I,aAlHrC,EAAKC,UAAYC,IAAMC,YAEvB,EAAK/I,MAAQ,CACXoC,KAAM,SACNG,SAAU,SACVgH,YAAa,8BACbE,MAAQ,IACRD,KAAM,EACNjC,WAAOyB,GAET,EAAK5H,aAAe,EAAKA,aAAajB,KAAlB,gBAdH,E,iFAmBD,IAAD,OACfd,QAAQC,IAAI,IACZ,IAAI4H,EAAc3G,KAAKZ,MAAMwH,SAASC,SAASC,MAAM,KACjDuB,EAAW1B,EAAYA,EAAY9B,OAAS,GAE1CO,EAAS,6BAAyBiD,GAExCpK,MAAMmH,EAAW,CACblH,OAAQ,MACRC,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAEjBI,MAAK,SAAAsK,GAAG,OAAEA,EAAIpK,UAChBF,MAAK,SAACC,GACHS,QAAQC,IAAI,+BACZD,QAAQC,IAAIV,GACb,EAAKiB,SAAS,CACbqK,UAAWtL,EACXwD,KAAMxD,EAAIwD,KACVG,SAAU3D,EAAI2D,SACdgH,YAAa3K,EAAI2K,YACjBE,MAAQ7K,EAAI6K,MACZD,IAAK5K,EAAI4K,IACTzB,SAAUnJ,EAAI2I,MACdqB,SAAWA,EACXrB,WAAOyB,OAGVhH,OAAM,SAACoE,S,+BAgFd,GADA/G,QAAQC,IAAI,6BACTiB,KAAKP,MAAM+B,SAEV,OADA1C,QAAQC,IAAI,+BACL,kBAAC,IAAD,CAAUqB,GAAE,sBAAiBJ,KAAKP,MAAM+B,YAEnD,IAAMoI,EAAS5J,KAAKP,MAEpB,OAAO,iCAAM,kBAAC,EAAD,MACX,8BACF,0BAAMQ,UAAW,kBAAkB0I,QAAQ,sBAAsBhG,SAAU3C,KAAKa,cAChF,yBAAKZ,UAAU,wBAEf,yBAAKA,UAAU,kBAEX,yBAAKA,UAAU,cACX,uCAEI,2BAAOgC,KAAK,OAAOhC,UAAU,eAAe6B,MAAO8H,EAAO/H,KAAMA,KAAK,OAAOO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,iEAItI,yBAAKrC,UAAU,cACX,4CACI,2BAAOgC,KAAK,OAAQhC,UAAU,eAAe6B,MAAO8H,EAAO5H,SAAUH,KAAK,WAAWO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,2BAK3I,yBAAKrC,UAAU,cACX,sCACI,2BAAOgC,KAAK,SAASmH,IAAI,IAAIC,IAAI,UAAUxH,KAAK,MAAMC,MAAO8H,EAAOX,IAAK7G,SAAUpC,KAAK2B,aAAcU,UAAQ,MAItH,yBAAKpC,UAAU,cACX,wCACI,2BAAOgC,KAAK,OAAQhC,UAAU,eAAe6B,MAAO8H,EAAOV,MAAOrH,KAAK,QAAQO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,kEAKzI,yBAAKrC,UAAU,kBACN,+CACA,8BAAU4B,KAAK,cAAcC,MAAO9B,KAAKP,MAAMuJ,YAAc5G,SAAUpC,KAAK2B,gBAGrF,yBAAK1B,UAAU,kBACN,yCACA,4BAAQgC,KAAK,SAAShC,UAAU,gBAC7B,2BAAO2I,QAAQ,0BAAf,kBAEH,6BACG,yBAAK3I,UAAU,mBAAmB8G,IAAK/G,KAAKP,MAAM+H,SAAUP,IAAI,MAGnE,2BAAOhF,KAAK,OAAOJ,KAAK,aAAawB,GAAG,yBAAyBwF,IAAK7I,KAAKsI,UAAWlG,SAAUpC,KAAK6H,gBAAiB5H,UAAU,sBAKrI,6BACA,6BAEA,2BAAOgC,KAAK,SAAShC,UAAU,kBAAkB6B,MAAM,qBACvD,2BAAOG,KAAK,SAAShC,UAAU,oBAAoB6B,MAAM,SAASzB,QAAWL,KAAKoI,6B,GAhMpD9H,aCG5BuJ,E,iLAGE,IAAIC,EAAY9J,KAAKZ,MAAMwK,OAAO5C,MAC9B+C,EAAa/J,KAAKZ,MAAMwK,OAAO/H,KAC/BwG,EAAWrI,KAAKZ,MAAMwK,OAAOhL,IAGjC,OAAO,yBAAKqB,UAAU,yBAClB,yBAAKA,UAAU,oBACb,kBAAC,IAAD,CAAMG,GAAI,eAAiBiI,GACzB,yBAAKtB,IAAG,UAAK+C,GAAa7J,UAAU,eAAgBgH,IAAI,UAI5D,yBAAKhH,UAAU,qCACf,wBAAIA,UAAU,cAAc8J,GAC5B,kBAAC,IAAD,CAAM3J,GAAI,eAAiBiI,GACvB,4BAAQpI,UAAU,qBAAlB,kB,GAlBYK,aAwOb0J,E,YA5Mb,WAAa5K,GAAS,IAAD,uBACnB,4CAAOA,KA+BT0E,cAAgB,SAACC,EAAOC,GACtB,IACMC,EADYF,EAAQC,IAAgB,EACP,EAAI,EACvC,OAAOE,KAAKC,MAAMJ,EAAQC,GAAeC,GAnCtB,EAsCrBG,gBAAkB,SAACnC,GAEjB,IAAMoC,EACE,SAAWpC,EACP,EAAKxC,MAAM6E,cAAgB,EAC3B,EAAK7E,MAAM6E,cAAgB,EAClC,EAAK7E,MAAM0D,SACd,EAAK7D,SAAS,CAAE6D,SAAS,EAAMT,QAAS,KAAM,WAG5C,EAAK6B,mBAAmBF,EAAe,EAAK5E,MAAM+E,WAhDnC,EAoDrBC,oBAAsB,WAAO,IAAD,EACD,EAAKhF,MAAvBiF,EADmB,EACnBA,QAASF,EADU,EACVA,MAIhB,GAAIE,GAAWC,OAAOC,KAAKF,GAASG,QAAUH,EAAQG,OAAQ,CAE5D,IAAMC,EAAaJ,EAAQK,KAAI,SAAA6E,GAG7B,OAAO,kBAAC,EAAD,CAAeA,OAAUA,OAGlC,OAAO,yBAAK3J,UAAU,mBAAmBoD,GAAK,kBAAkByB,GAG9D,OAAO,yBAAKiB,MAAM,uBAClB,gDAAqB,oCAAUvB,MArEhB,EA+ErBQ,oBAAsB,SAAClE,GACrB,IAAM0D,EAAQ1D,EAAMc,OAAOE,MACpB0C,EAIL,EAAKlF,SAAS,CAAEkF,QAAOrB,SAAS,EAAMT,QAAS,KAAM,WACnD,EAAK6B,mBAAmB,EAAGC,OAJ7B,EAAKlF,SAAS,CAAEkF,QAAOE,QAAS,GAAIO,aAAc,EAAGC,WAAY,EAAGZ,cAAe,EAAG5B,QAAS,KAC/F,EAAK6B,mBAAmB,EAAGC,KAnFV,EA4FrBD,mBAAqB,WAA6B,IAA5BY,EAA2B,uDAAd,EAAGX,EAAW,uCAM3CY,EAAS,kCAHbD,EAAaA,GAAc,GAGd,OAA2CX,EAAM,WAAD,OAAaA,GAAU,IAElF,EAAK9E,QAEP,EAAKA,OAAOA,SAIf,EAAKA,OAAS2F,IAAMC,YAAYC,SAChCF,IACEG,IAAIJ,EAAW,CACZK,YAAa,EAAK/F,OAAO1B,MACzBG,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGrBI,MAAK,SAACC,GAGN,IAAMqH,EAAqBrH,EAAIE,KAAK0L,WAAWpF,OAExC,GADJ,6DAEH,EAAKvF,SAAS,CACTgF,cAAgBa,EAChBT,QAASrG,EAAIE,KAAK0L,WAClBjH,WAAY3E,EAAIE,KAAKqH,YACzBlD,QAASgD,EACTvC,SAAS,OAGV1B,OAAM,SAACoE,IACHR,IAAMS,SAASD,IAAUA,IAC5B,EAAKvG,SAAS,CACb6D,SAAS,EACTT,QAAS,qDAlIR,IAAInD,GAAY,EACZV,EAAW,GAIf,GAAId,aAAaC,MAEV,CACH,IAAIyF,EAAOhF,IAAUV,aAAaC,OAClCuB,EAAWkE,EAAK9E,KAChBE,EAAW4E,EAAK5E,cAJhBU,GAAY,EATC,OAgBnB,EAAKE,MAAQ,CACX+E,MAAO,GACPE,QAAS,GACTmB,MAAO,GACPnD,QAAS,GACTS,SAAS,EACT8B,aAAc,EACdjC,WAAY,EACZsB,cAAe,EACf/E,SAAUA,EACVV,SAAUA,GAGZ,EAAKa,OAAS,GA7BK,E,iFA2EnBM,KAAKuE,mBAAmB,EAAG,M,+BAiEnB,IAAD,SAIoEvE,KAAKP,MAAxE+E,EAJD,EAICA,MAAOrB,EAJR,EAIQA,QAAUmB,EAJlB,EAIkBA,cAAetB,EAJjC,EAIiCA,WAAYzD,EAJ7C,EAI6CA,SAE9CuD,GANC,EAIuDjE,SAEzC,EAAIyF,GAEnBvB,EAAeC,EAAasB,EAGlC,OAAgB,IAAb/E,EACM,kBAAC,IAAD,CAAUa,GAAG,gBAGf,6BACP,kBAAC,EAAD,MAEE,yBAAKH,UAAU,cACb,2BAAOA,UAAU,WACf,gDACCD,KAAKZ,MAAM8K,QAAU,0BAAMC,OAAS,gBAAgBjM,OAAS,OAC1D,2BAAO+D,KAAK,SAAShC,UAAU,eAAe6B,MAAM,eAC5C,sCAEd,2BAAO7B,UAAU,WACjB,yCAIF,0BAAMA,UAAU,iBAElB,2BAAOgC,KAAK,OAAOJ,KAAK,SAASC,MAAO0C,EAAOnB,GAAG,eAAepD,UAAW,eAAeiC,YAAY,WAAWE,SAAUpC,KAAKgF,sBAEjI,yBAAK/E,UAAU,aAGXD,KAAKyE,uBAIN,kBAACuB,EAAD,CACC7C,QAASA,EACTL,aAAcA,EACdC,aAAcA,EACdK,SAAYkB,EACZtB,WAAcA,EACdC,gBAAiB,kBAAM,EAAKmB,gBAAgB,SAC5ClB,gBAAiB,kBAAM,EAAKkB,gBAAgB,WACtB,IAAvBpE,KAAKP,MAAMF,SACX,yBAAKU,UAAU,gBACb,+CACD,kBAAC,IAAD,CAAMG,GAAG,gBAAgBH,UAAU,mBAAnC,iBAEI,4BAAQgC,KAAK,SAAShC,UAAU,gBAAhC,sBAEA,4BAAQgC,KAAK,SAAShC,UAAU,mBAAhC,0BAES,2C,GAvMQK,aCmLdmG,E,YA7MX,WAAarH,GAAS,IAAD,uBACjB,4CAAOA,KAkBTmF,mBAAqB,WACnB,IAAMa,EAAS,6BAAyB,EAAK3F,MAAM4I,UAE/C,EAAK3I,QACP,EAAKA,OAAOA,SAGd,EAAKA,OAAS2F,IAAMC,YAAYC,SAChCF,IACGG,IAAIJ,EAAW,CACdK,YAAa,EAAK/F,OAAO1B,MACzBG,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGnBI,MAAK,SAACC,GACJ,EAAKiB,SAAS,CACbqK,UAAWtL,EAAIE,UAGlBkD,OAAM,SAACoE,QAxCO,EA4CvBuE,mBAAqB,WACnB,OAAOnM,MAAM,6BAA8B,CACnCC,OAAQ,OACRC,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,oBAElBkD,KAAMC,KAAKC,UAAU,CAACiH,SAAW,EAAK5I,MAAMkK,UAAU/K,IACpDY,OAAQ,EAAKC,MAAMD,WAGtBpB,MAAK,SAAAiD,GAEJ,OADAvC,QAAQC,IAAIsC,GACLA,EAAK/C,UACbF,MAAK,SAAAG,GACNO,QAAQC,IAAIR,GACZ,EAAKe,SAAS,CACVqK,UAAWpL,QA7DA,EAkEvB8L,qBAAuB,WACrB,OAAOpM,MAAM,6BAA8B,CACnCC,OAAQ,OACRC,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,oBAElBkD,KAAMC,KAAKC,UACT,CACAiH,SAAW,EAAK5I,MAAMkK,UAAU/K,IAChCY,OAAQ,EAAKC,MAAMD,WAGtBpB,MAAK,SAAAiD,GAEJ,OADAvC,QAAQC,IAAIsC,GACLA,EAAK/C,UACbF,MAAK,SAAAG,GACNO,QAAQC,IAAIR,GACZ,EAAKe,SAAS,CACVqK,UAAWpL,QArFA,EA0FvB+L,eAAiB,WACf,OAAG,EAAK7K,MAAMkK,UAAUY,YAAYC,SAAS,EAAK/K,MAAMD,QAC/C,yBAAKS,UAAU,gBACtB,4CACA,4BAAQgC,KAAK,SAAShC,UAAU,iBAAgBI,QAAW,EAAKgK,sBAAhE,gBAGO,yBAAKpK,UAAU,gBACtB,4CACA,4BAAQgC,KAAK,SAAShC,UAAU,kBAAkBI,QAAW,EAAK+J,oBAAlE,eAjGE,IAAIzD,EAAc,EAAKvH,MAAMwH,SAASC,SAASC,MAAM,KACjDuB,EAAW1B,EAAYA,EAAY9B,OAAS,GAG5C9E,EAAWb,IANE,OAOjB,EAAKO,MAAQ,CACXD,OAASO,EAASnB,IAClBW,SAAUQ,EAASpB,KACnB2I,QAASvH,EAASuH,QAClBe,SAAWA,GAEb,EAAK3I,OAAO,GAbK,E,iFAgBjBM,KAAKuE,uB,+BA0FT,IAAIvE,KAAKP,MAAMkK,UACb,OAAO,6BAAK,sCAEd,IAAMC,EAAS5J,KAAKP,MAAMkK,UAC1B,OAAO,6BACL,kBAAC,EAAD,MACA,8BACF,sCAAQC,EAAO/H,KAAf,YAAuB+H,EAAO5H,WAC9B,yBAAK/B,UAAU,wBAEX,yBAAKA,UAAU,qBACX,yBAAK8G,IAAK6C,EAAO5C,MAAOC,IAAI,MAGhC,yBAAKhH,UAAU,oBACX,yBAAKA,UAAU,SACX,+BACE,+BAEE,4BACI,qCACA,4BAAK2J,EAAO/H,OAEhB,4BACI,yCACA,4BAAK+H,EAAO5H,WAEhB,4BACI,0CACA,4BAAK,IAAI0B,KAAKkG,EAAOa,SAAS7G,oBAM1C,yBAAK3D,UAAU,SACX,+BACE,+BACE,4BACI,oCACA,4BAAK2J,EAAOX,MAEhB,4BACI,qCACA,oCAEJ,4BACI,qCACA,wCAOZ,6CACJ,yBAAKhJ,UAAU,oBACV2J,EAAOb,aAOZ,iDAGA,yBAAK9I,UAAU,sBACX,2FAGHD,KAAKP,MAAM6H,QAAUtH,KAAKsK,iBAAmB,qCAGvB,IAAtBtK,KAAKP,MAAMF,SACV,yBAAKU,UAAU,gBACb,+CAEA,4BAAQgC,KAAK,SAAShC,UAAU,iBAAiBiH,cAAY,QAAQC,cAAY,uBAAjF,iBAGE,4BAAQlF,KAAK,SAAShC,UAAU,mBAAkB,kBAAC,IAAD,CAAMG,GAAE,2BAAsBwJ,EAAOhL,MAArC,mBAEtD,uCAQiB,IAAtBoB,KAAKP,MAAMF,SAAe,kBAACmL,EAAD,CAAalE,WAAU,oBAAeoD,EAAO/H,MAChCsE,aAAY,6BAAwByD,EAAOhL,KAC3CwH,WAAU,gBAC7C,0C,GA1MmB9F,aCuJbwI,E,YAxJX,WAAa1J,GAAS,IAAD,8BACjB,4CAAOA,KAiBXyB,aAAe,SAAAC,GACXA,EAAMhB,iBAENhB,QAAQC,IAAI,sBAEZ,IAAMkC,EAAW,CAAEY,KAAM,EAAKpC,MAAMoC,KAChCG,SAAS,EAAKvC,MAAMuC,SACpB+G,YAAY,EAAKtJ,MAAMsJ,YACvBE,IAAK,EAAKxJ,MAAMwJ,IAChBC,MAAQ,EAAKzJ,MAAMyJ,MACnBC,UAAW,EAAK1J,MAAMuH,OAC1BlI,QAAQC,IAAIkC,GAEZ,IAAMyG,EAAY,IAAIC,SAEtB,IAAI,IAAM9F,KAAQZ,EACdyG,EAASE,OAAO/F,EAAMZ,EAASY,IAGnC,OAAO5D,MAAM,qBAAsB,CAC/BC,OAAQ,OACRC,QAAS,CACb,cAAgB,UAAhB,OAA2BJ,aAAaC,QAEpCkD,KAAMwG,IACPtJ,MAAK,SAAAiD,GAEJ,OADAvC,QAAQC,IAAIsC,GACLA,EAAK/C,UAEbF,MAAK,SAAAG,GACFO,QAAQC,IAAI,SACZD,QAAQC,IAAIR,GAEZ,EAAKe,SAAS,CAACkC,SAAUjD,EAAKK,SAE/B6C,OAAM,SAAAC,GAAM5C,QAAQC,IAAI2C,OArDZ,EAwDvBC,aAAe,SAAAb,GACX,EAAKxB,SAAL,eAAgBwB,EAAMc,OAAOC,KAAOf,EAAMc,OAAOE,QACjDhD,QAAQC,IAAI,kBACZD,QAAQC,IAAI,EAAKU,QA3DE,EA6DvBoI,gBAAkB,SAAAC,GAEd,IAAMC,EAAQC,MAAMC,KAAKH,EAAElG,OAAOmG,OAClCjJ,QAAQC,MACR,EAAKO,SAAS,CAAC0H,MAAQe,EAAM,GACfP,SAAWU,IAAIC,gBAAgBJ,EAAM,OAhEjD,EAAKO,UAAYC,IAAMC,YACvB,EAAK/I,MAAQ,CACXoC,KAAM,GACNG,SAAU,GACVgH,YAAa,8BACbC,KAAM,EACNC,MAAO,GACPlC,WAAOyB,EACPjB,SAAU,IAEZ,EAAK3G,aAAe,EAAKA,aAAajB,KAAlB,gBAZH,E,sEAgFjB,OADAd,QAAQC,IAAI,6BACTiB,KAAKP,MAAM+B,UACV1C,QAAQC,IAAI,+BACL,kBAAC,IAAD,CAAUqB,GAAE,sBAAiBJ,KAAKP,MAAM+B,aAG5C,iCAAM,kBAAC,EAAD,MACX,8BACF,0BAAMvB,UAAW,kBAAkB0I,QAAQ,sBAAsBhG,SAAU3C,KAAKa,cAChF,yBAAKZ,UAAU,wBAEf,yBAAKA,UAAU,kBAEX,yBAAKA,UAAU,cACX,uCAEI,2BAAOgC,KAAK,OAAOhC,UAAU,eAAeiC,YAAY,aAAaL,KAAK,OAAOO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,iEAI3I,yBAAKrC,UAAU,cACX,4CACI,2BAAOgC,KAAK,OAAQhC,UAAU,eAAeiC,YAAY,iBAAiBL,KAAK,WAAWO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,iEAKhJ,yBAAKrC,UAAU,cACX,sCACI,2BAAOgC,KAAK,SAASmH,IAAI,IAAIC,IAAI,UAAUxH,KAAK,MAAMC,MAAO9B,KAAKP,MAAMwJ,IAAK7G,SAAUpC,KAAK2B,aAAcU,UAAQ,MAI1H,yBAAKpC,UAAU,cACX,wCACI,2BAAOgC,KAAK,OAAQhC,UAAU,eAAeiC,YAAY,cAAcL,KAAK,QAAQO,SAAUpC,KAAK2B,aAAcU,UAAQ,EAACC,QAAQ,kEAK9I,yBAAKrC,UAAU,kBACN,+CACA,8BAAU4B,KAAK,cAAcC,MAAO9B,KAAKP,MAAMuJ,YAAc5G,SAAUpC,KAAK2B,gBAGrF,yBAAK1B,UAAU,kBACN,yCACA,4BAAQgC,KAAK,SAAShC,UAAU,gBAC7B,2BAAO2I,QAAQ,0BAAf,kBAEH,6BACG,yBAAK3I,UAAU,mBAAmB8G,IAAK/G,KAAKP,MAAM+H,SAAUP,IAAI,MAGnE,2BAAOhF,KAAK,OAAOJ,KAAK,aAAawB,GAAG,yBAAyBwF,IAAK7I,KAAKsI,UAAWlG,SAAUpC,KAAK6H,gBAAiB5H,UAAU,sBAQrI,6BACA,6BACJ,2BAAOgC,KAAK,SAAShC,UAAU,kBAAkB6B,MAAM,gC,GAhJzBxB,aCG5BkD,E,iLAGE,IAAImH,EAAW3K,KAAKZ,MAAMwL,MAAM5D,MAC5B6D,EAAY7K,KAAKZ,MAAMwL,MAAM/I,KAC7BiJ,EAAU9K,KAAKZ,MAAMwL,MAAMhM,IAG/B,OAAO,yBAAKqB,UAAU,yBAClB,yBAAKA,UAAU,oBACb,kBAAC,IAAD,CAAMG,GAAI,WAAa0K,GACrB,yBAAK/D,IAAG,UAAK4D,GAAY1K,UAAU,eAAgBgH,IAAI,UAI3D,yBAAKhH,UAAU,qCACf,wBAAIA,UAAU,cAAc4K,GAC5B,kBAAC,IAAD,CAAMzK,GAAI,WAAa0K,GACnB,4BAAQ7K,UAAU,qBAAlB,kB,GAlBQK,aAqNTuD,E,YAzLb,WAAazE,GAAS,IAAD,uBACnB,4CAAOA,KAmBT0E,cAAgB,SAACC,EAAOC,GACtB,IACMC,EADYF,EAAQC,IAAgB,EACP,EAAI,EACvC,OAAOE,KAAKC,MAAMJ,EAAQC,GAAeC,GAvBtB,EA0BrBG,gBAAkB,SAACnC,GAEjB,IAAMoC,EACE,SAAWpC,EACP,EAAKxC,MAAM6E,cAAgB,EAC3B,EAAK7E,MAAM6E,cAAgB,EAClC,EAAK7E,MAAM0D,SACd,EAAK7D,SAAS,CAAE6D,SAAS,EAAMT,QAAS,KAAM,WAC5C,EAAK6B,mBAAmBF,EAAe,EAAK5E,MAAM+E,WAlCnC,EAuCrBC,oBAAsB,WAAO,IAAD,EACD,EAAKhF,MAAvBiF,EADmB,EACnBA,QAASF,EADU,EACVA,MAIhB,GAAIE,GAAWC,OAAOC,KAAKF,GAASG,QAAUH,EAAQG,OAAQ,CAE5D,IAAMC,EAAaJ,EAAQK,KAAI,SAAA6F,GAG7B,OAAO,kBAAC,EAAD,CAAWA,MAASA,OAE7B,OAAO,yBAAK3K,UAAU,mBAAmBoD,GAAK,kBAAkByB,GAG9D,OAAO,yBAAK7E,UAAU,uBACtB,gDAAqB,oCAAUuE,MAvDhB,EAgErBQ,oBAAsB,SAAClE,GACrB,IAAM0D,EAAQ1D,EAAMc,OAAOE,MACtB0C,EAIH,EAAKlF,SAAS,CAAEkF,QAAOrB,SAAS,EAAMT,QAAS,KAAM,WACnD,EAAK6B,mBAAmB,EAAGC,OAJ7B,EAAKlF,SAAS,CAAEkF,QAAOE,QAAS,GAAIO,aAAc,EAAGC,WAAY,EAAGZ,cAAe,EAAG5B,QAAS,KAC/F,EAAK6B,mBAAmB,EAAGC,KApEV,EA6ErBD,mBAAqB,SAACY,EAAYX,GAMlC,IAAMY,EAAS,8BAHbD,EAAaA,GAAc,GAGd,OAAuCX,EAAM,WAAD,OAAaA,GAAU,IAE9E,EAAK9E,QAEP,EAAKA,OAAOA,SAIf,EAAKA,OAAS2F,IAAMC,YAAYC,SAChCF,IACEG,IAAIJ,EAAW,CACZK,YAAa,EAAK/F,OAAO1B,MACzBG,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGrBI,MAAK,SAACC,GAGN,IAAMqH,EAAqBrH,EAAIE,KAAKwM,UAAUlG,OAEvC,GADJ,6DAEH,EAAKvF,SAAS,CACTgF,cAAgBa,EAChBT,QAASrG,EAAIE,KAAKwM,UAClB/H,WAAY3E,EAAIE,KAAKqH,YACzBlD,QAASgD,EACTvC,SAAS,OAGV1B,OAAM,SAACoE,IACHR,IAAMS,SAASD,IAAUA,IAC5B,EAAKvG,SAAS,CACb6D,SAAS,EACTT,QAAS,qDAnHV,IAAI3C,EAAWb,IAHI,OAKnB,EAAKO,MAAQ,CACX+E,MAAO,GACPE,QAAS,GACTmB,MAAO,GACPnD,QAAS,GACTS,SAAS,EACT8B,aAAc,EACdjC,WAAY,EACZsB,cAAe,EACf/E,SAAUQ,EAASpB,KACnBE,SAAUkB,EAASlB,UAErB,EAAKa,OAAS,GAjBK,E,iFA6DnBM,KAAKuE,mBAAmB,EAAG,M,+BAgEnB,IAAD,SAEyDvE,KAAKP,MAA7D+E,EAFD,EAECA,MAAOrB,EAFR,EAEQA,QAAUmB,EAFlB,EAEkBA,cAAetB,EAFjC,EAEiCA,WAAYzD,EAF7C,EAE6CA,SAE9CuD,EAAe,EAAIwB,EAEnBvB,EAAeC,EAAasB,EAGlC,OAAgB,IAAb/E,GAA+B,IAAbA,EACZ,kBAAC,IAAD,CAAUa,GAAG,gBAGf,6BACP,kBAAC,EAAD,MAEE,yBAAKH,UAAU,cACb,2BAAOA,UAAU,WACf,iDAEF,2BAAOA,UAAU,WACjB,yCAIF,0BAAMA,UAAU,iBAElB,2BAAOgC,KAAK,OAAOJ,KAAK,SAASC,MAAO0C,EAAOnB,GAAG,eAAepD,UAAW,eAAeiC,YAAY,WAAWE,SAAUpC,KAAKgF,sBAEjI,yBAAK/E,UAAU,aAGXD,KAAKyE,uBAIN,kBAACuB,EAAD,CACC7C,QAASA,EACTL,aAAcA,EACdC,aAAcA,EACdK,SAAYkB,EACZtB,WAAcA,EACdC,gBAAiB,kBAAM,EAAKmB,gBAAgB,SAC5ClB,gBAAiB,kBAAM,EAAKkB,gBAAgB,WACtB,IAAvBpE,KAAKP,MAAMF,SACX,yBAAKU,UAAU,gBAEb,+CACD,kBAAC,IAAD,CAAMG,GAAG,YAAYH,UAAU,mBAA/B,gBAEI,4BAAQgC,KAAK,SAAShC,UAAU,gBAAhC,sBAEA,4BAAQgC,KAAK,SAAShC,UAAU,mBAAhC,0BAES,2C,GApLIK,aC5BnB0K,E,YACJ,WAAa5L,GAAS,IAAD,8BACnB,4CAAOA,KAOT6L,oBAAsB,SAAAnK,GACpBA,EAAMhB,iBAEN,EAAKJ,OAAS2F,IAAMC,YAAYC,SAEhC,IAAMH,EAAS,wCAAoC,EAAKhG,MAAMuK,UAAU/K,KACpEX,MAAMmH,EAAW,CACflH,OAAS,OACTuH,YAAa,EAAK/F,OAAO1B,MACzBG,QAAS,CACL,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGnBI,MAAK,SAACC,GACL,EAAKe,MAAM8L,cAEZzJ,OAAM,SAACoE,QAzBK,EA4BrBsF,uBAAyB,SAAArK,GACvBA,EAAMhB,iBACN,IAAMsF,EAAS,wCAAoC,EAAKhG,MAAMuK,UAAU/K,KACxEE,QAAQC,IAAIqG,GACRC,IACG+F,KAAKhG,EAAW,CAEfjH,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGnBI,MAAK,SAACC,GACJ,EAAKiB,SAAS,CACbgC,OAAQjD,EAAIiD,YAGfG,OAAM,SAACoE,QA3Cd,EAAKpG,MAAQ,CACTmK,OAAS,EAAKxK,MAAMuK,WAExB,EAAKjK,OAAO,GALO,E,sEAkDnB,OAAQ,4BACR,4BAAI,kBAAC,IAAD,CAAMU,GAAE,6BAAyBJ,KAAKZ,MAAMuK,UAAU/K,MAAQoB,KAAKZ,MAAMuK,UAAU9H,OACvF,4BAAK7B,KAAKZ,MAAMuK,UAAUT,OAC1B,4BAAKlJ,KAAKZ,MAAMuK,UAAU0B,OAAO,IACjC,4BACErL,KAAKP,MAAMmK,OAAOyB,OAAOb,SAASxK,KAAKZ,MAAM0L,SAC1C,0BAAMX,OAAO,oCAAoCjM,OAAS,QAC3D,uBAAGoN,MAAO,CAACC,QAAQ,SAAnB,MACA,2BAAOtJ,KAAK,SAAShC,UAAU,iBAAiB6B,MAAM,cAAczB,QAASL,KAAKmL,0BAIjF,0BAAMhB,OAAO,iCAAiCjM,OAAS,QACxD,uBAAGoN,MAAO,CAACC,QAAQ,SAAnB,MACA,2BAAOtJ,KAAK,SAAShC,UAAU,kBAAkB6B,MAAM,WAAWzB,QAASL,KAAKiL,6B,GAjExD3K,aA4E1BkL,E,YACJ,WAAapM,GAAS,IAAD,8BACnB,4CAAOA,KA0BTqM,cAAgB,WACd3M,QAAQC,IAAI,qBAERsG,IACGG,IAFQ,2BAEO,CACdrH,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGnBI,MAAK,SAACC,GAEJ,EAAKiB,SAAS,CACboM,WAAYrN,EAAIE,UAGnBkD,OAAM,SAACoE,QA3CK,EA+CrBpB,oBAAsB,WACpB,IAAMC,EAAU,EAAKjF,MAAMiM,WAG3B,GAAIhH,GAAWC,OAAOC,KAAKF,GAASG,QAAUH,EAAQG,OAAQ,CAE5D,IAAMC,EAAaJ,EAAQK,KAAI,SAAA6E,GAG7B,OAAO,kBAAC,EAAD,CAAmBkB,QAAS,EAAK1L,MAAM0L,QAASnB,UAAWC,EAAQsB,SAAU,EAAKO,mBAE7F,OAAO,+BAAQ3G,GAGX,OAAO,+BAAO,4BACd,+CA5DJ,EAAKrF,MAAQ,CACXiM,WAAa,GACbZ,QAAU,EAAK1L,MAAM0L,SAJJ,E,iFAQD,IAAD,OAEbzF,IACGG,IAFQ,2BAEO,CACdrH,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGnBI,MAAK,SAACC,GAEJ,EAAKiB,SAAS,CACboM,WAAYrN,EAAIE,UAGnBkD,OAAM,SAACoE,S,+BA4Cd,OAAO,yBAAKyF,MAAS,CAACK,MAAQ,QAC9B,4BAAQzE,cAAY,WAAWC,cAAY,iBAAiBlH,UAAW,eAAvE,YACA,yBAAKoD,GAAG,gBAAgBpD,UAAU,iBAE9B,yBAAKA,UAAU,YAAY0L,MAAM,QAC7B,2BAAO1L,UAAU,qCAAqCoD,GAAG,YAAYsI,MAAM,OAAOC,YAAY,KAC1F,+BACI,4BACI,oCACA,qCACA,6CACA,wCAIN5L,KAAKyE,8B,GAnFEnE,aAmPVuL,E,YAtJX,WAAazM,GAAS,IAAD,uBACjB,4CAAOA,KAiBTmF,mBAAqB,WACnB,IAAMa,EAAS,yBAAqB,EAAK3F,MAAMqL,SAE3C,EAAKpL,QACP,EAAKA,OAAOA,SAGd,EAAKA,OAAS2F,IAAMC,YAAYC,SAChCF,IACGG,IAAIJ,EAAW,CACdK,YAAa,EAAK/F,OAAO1B,MACzBG,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,aAAaC,OACxC,eAAgB,uCAGnBI,MAAK,SAACC,GACLS,QAAQC,IAAIV,GACX,EAAKiB,SAAS,CACbsL,MAAOvM,EAAIE,UAGdkD,OAAM,SAACoE,QAtCV,IAAIc,EAAc,EAAKvH,MAAMwH,SAASC,SAASC,MAAM,KACjDgE,EAAUnE,EAAYA,EAAY9B,OAAS,GAG3C9E,EAAWb,IANE,OAQjB,EAAKO,MAAQ,CACXF,SAAUQ,EAASpB,KACnBmM,QAAUA,GAEZ,EAAKpL,OAAO,GAZK,E,iFAejBM,KAAKuE,uB,+BAgCT,IAAIvE,KAAKP,MAAMmL,MACb,OAAO,6BAAK,sCAGd,IAAMA,EAAQ5K,KAAKP,MAAMmL,MAYzB,OAAO,6BACL,kBAAC,EAAD,MACA,8BACF,sCAAQA,EAAM/I,OACd,yBAAK5B,UAAU,wBAEX,yBAAKA,UAAU,qBACX,yBAAK8G,IAAK6D,EAAM5D,MAAOC,IAAI,MAG/B,yBAAKhH,UAAU,oBACX,yBAAKA,UAAU,SACX,+BACE,+BAEE,4BACI,qCACA,4BAAK2K,EAAM/I,OAEf,4BACI,mDACA,4BAAK+I,EAAMkB,mBAEf,4BACI,0CACA,4BAAK,IAAIpI,KAAKkH,EAAMH,SAAS7G,oBAMzC,yBAAK3D,UAAU,SACX,+BACE,+BACE,4BACI,uCACA,4BAAK2K,EAAMmB,SAEf,4BACI,qCACA,oCAEJ,4BACI,qCACA,wCAQhB,yBAAK9L,UAAU,sBACX,2FAImB,IAAtBD,KAAKP,MAAMF,SACV,yBAAKU,UAAU,gBACb,+CAEA,4BAAQgC,KAAK,SAAShC,UAAU,iBAAiBiH,cAAY,QAAQC,cAAY,uBAAjF,gBAGE,4BAAQlF,KAAK,SAAShC,UAAU,mBAAkB,kBAAC,IAAD,CAAMG,GAAE,uBAAkBwK,EAAMhM,MAAhC,kBAGpD,qCACqB,IAAtBoB,KAAKP,MAAMF,SACZ,yBAAKU,UAAU,gBACb,kBAAC,EAAD,CAAY6K,QAAUF,EAAMhM,OAG5B,uCAMe,IAAtBoB,KAAKP,MAAMF,SAAe,kBAACmL,EAAD,CAAalE,WAAU,gBAAWoE,EAAM/I,MAC3BsE,aAAY,yBAAoByE,EAAMhM,KACtCwH,WAAU,YAC7C,0C,GAnJe9F,aCtKxB0L,IAASC,OACL,kBAAC,IAAD,KACA,mBCPW,SAAgB7M,GACvB,OACA,gCACI,gDDIR,MACA,mBEgBW,WACb,OACE,6BAEA,kBAAC,IAAD,KAEE,kBAAC,IAAD,CAAOc,OAAK,EAACgM,KAAK,IAAIC,UAAW5L,IACjC,kBAAC,IAAD,CAAOL,OAAK,EAACgM,KAAK,SAASC,UAAW3L,IAGtC,kBAAC,IAAD,CAAON,OAAK,EAACgM,KAAK,cAAcC,UAAWvL,IAC3C,kBAAC,IAAD,CAAOV,OAAK,EAACgM,KAAK,iBAAiBC,UAAWC,IAI9C,kBAAC,IAAD,CAAOlM,OAAK,EAACgM,KAAK,cAAcC,UAAWnC,IAC3C,kBAAC,IAAD,CAAO9J,OAAK,EAACgM,KAAK,kBAAkBC,UAAW1F,IAC/C,kBAAC,IAAD,CAAOvG,OAAK,EAACgM,KAAK,gBAAgBC,UAAWrD,IAC7C,kBAAC,IAAD,CAAO5I,OAAK,EAACgM,KAAK,uBAAuBC,UAAW7C,IAGpD,kBAAC,IAAD,CAAOpJ,OAAK,EAACgM,KAAK,UAAUC,UAAWtI,IACvC,kBAAC,IAAD,CAAO3D,OAAK,EAACgM,KAAK,cAAcC,UAAWN,IAC3C,kBAAC,IAAD,CAAO3L,OAAK,EAACgM,KAAK,YAAYC,UAAWE,IAIzC,kBAAC,IAAD,CAAOnM,OAAK,EAACgM,KAAK,aAAaC,UAAWG,IAC1C,kBAAC,IAAD,CAAOpM,OAAK,EAACgM,KAAK,kBAAkBC,UAAW/E,IAC/C,kBAAC,IAAD,CAAOlH,OAAK,EAACgM,KAAK,SAASC,UAAWI,IAItC,kBAAC,IAAD,CAAOrM,OAAK,EAACgM,KAAK,YAAYC,UAAWnC,IACzC,kBAAC,IAAD,CAAO9J,OAAK,EAACgM,KAAK,cAAcC,UAAW1F,IAC3C,kBAAC,IAAD,CAAOvG,OAAK,EAACgM,KAAK,UAAUC,UAAWnC,IACvC,kBAAC,IAAD,CAAO9J,OAAK,EAACgM,KAAK,SAASC,UAAWnC,QFpDxC,OAEFwC,SAASC,eAAe,W","file":"static/js/main.f5d3d310.chunk.js","sourcesContent":["import jwtDecode from \"jwt-decode\"\n\n\n\n\nexport function updateAuth(){\n    \n    if(!localStorage.token) {\n        console.log(\"Storage empty\");\n        return Promise.reject( {\n                role : null,\n                _id : null,\n                username : null,\n        });\n    }\n\n    return fetch(\"/api/v1/auth/checkToken\", {\n        method: 'get',\n        headers: {\n          'Authorization': `Bearer ${localStorage.token}`,\n        },}).then(res=>{\n            return res.json()})\n        .then(data=>{\n            if(data.token){\n                localStorage.setItem(\"token\", data.token);\n                let res = jwtDecode(localStorage.token);\n                return res;\n            }else {\n                localStorage.removeItem(\"token\");\n                return {\n                    role : null,\n                    _id : null,\n                    username : null,\n                }\n            }\n        });\n\n}\n\nexport function decodeToken(token){\n    return jwtDecode(token);\n}\n\nexport function getCurrUserObj(){\n\n        if(!localStorage.token){\n            return {};\n        } else {\n            console.log(\"Decode:\");\n            console.log(jwtDecode(localStorage.token));\n            return jwtDecode(localStorage.token);\n        }\n}\n\n","import React, { Component } from \"react\";\nimport { NavLink } from 'react-router-dom'\nimport { updateAuth} from \"./myTools\"\n\n\n\nclass HeaderLinks extends Component {\n    constructor( props ) {\n        super( props );\n        \n        this.state = {\n            userRole : null,\n            username : null,\n            userId : null,\n        };\n        this.cancel = '';\n        this.logOutHandle =this.logOutHandle.bind(this);   \n      }\n\n      componentDidMount = () =>{\n        updateAuth().then(res=>{\n            this.setState({\n                userRole : res.role,\n                username : res.username,\n                userId : res._id,\n            });  \n        });\n      }\n      \n      logOutHandle(ev){\n          ev.preventDefault();\n\n          localStorage.removeItem(\"token\")\n          let currUser = updateAuth();\n\n          this.setState({\n            userRole : currUser.role,\n            username : currUser.username,\n            userId : currUser._id,\n        });\n        }\n\n    render() {\n        if(this.state.userRole === 1){\n            return (\n            <div className=\"myNav\">\n                <NavLink exact className=\"navlink\"  activeClassName=\"navlink-active\"  to=\"/\">Home</NavLink>\n                <NavLink exact className=\"navlink\"  activeClassName=\"navlink-active\" to=\"/about\">About</NavLink>\n                <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/users\">Users</NavLink>\n                <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/characters\">Characters</NavLink>\n                <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/titles\">Titles</NavLink>\n\n                <NavLink exact className=\"navlink login\" to=\"/\" onClick={this.logOutHandle}>Log Out</NavLink>\n                <NavLink exact className=\"navlink login\" to={`/users/${this.state.userId}`}>{this.state.username}</NavLink>\n                \n            </div>)} \n            else if(this.state.userRole === 0){\n                return (\n                <div className=\"myNav\">\n                    <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/\">Home</NavLink>\n                    <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/about\">About</NavLink>\n                    <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/titles\">Titles</NavLink>\n                    <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/characters\">Characters</NavLink>\n                    \n                    <NavLink exact className=\"navlink login\" to=\"/\" onClick={this.logOutHandle}>Log Out</NavLink>\n                    <NavLink exact className=\"navlink login\" to={`/users/${this.state.userId}`}>{this.state.username}</NavLink>                    \n                </div>)} \n            else {\n                return (\n                <div className=\"myNav\">\n                    <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/\">Home</NavLink>\n                    <NavLink exact className=\"navlink\" activeClassName=\"navlink-active\" to=\"/about\">About</NavLink>\n                          \n                    <NavLink exact className=\"navlink login\" activeClassName=\"navlink-active\" to=\"/auth/login\">Log in</NavLink>\n                    <NavLink exact className=\"navlink login\" activeClassName=\"navlink-active\" to=\"/auth/register\">Sign up</NavLink>\n                    \n                </div>)} \n    }\n  }\n  \n  export default HeaderLinks;\n\n","import React, { Component } from \"react\";\nimport HeaderLinks from \"./HeaderLinks\"\n\n// import \"./App.css\";\n\n\nclass IndexPage extends Component {\n  render() {\n    console.log(\"rendering index page\");\n    return <div>\n        <HeaderLinks/>\n        <main>\n\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n        <p>This is my first web-page!</p>\n\n    </main>\n  </div>\n  }\n}\n\nexport default IndexPage;","import React, { Component } from \"react\";\nimport Header from \"./widgets/Header\"\nimport HeaderLinks from \"./HeaderLinks\"\n\nclass AboutPage extends Component {\n  render() {\n    return <div>\n      <HeaderLinks/>\n        <main>\n\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n        <p>Some About Here!</p>\n\n    </main>\n  </div>\n  }\n}\n\nexport default AboutPage;","import React, { Component } from \"react\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport HeaderLinks from \"./HeaderLinks\";\n\n\nclass ErrorBlock extends Component{\n  render(){\n        \n          return <div className=\"alert alert-danger\">\n                <strong> \n                  <h3>Wrong inputs!</h3>\n                <ul>\n                  {this.props.loginErr ? <li>Login is not unique</li> : <></>}\n                  {this.props.passErr  ? <li>Passwords are different</li> : <></>}\n                </ul>\n                </strong>\n          </div> \n  }\n}\n\nclass LoginPage extends Component {\n    constructor( props ) {\n        super( props );\n        this.state = {\n          login: \"\",\n          fullname: \"\",\n          password1: \"\",\n          password2: \"\",\n          redirect: false,\n          loginErr: false,\n          passErr: false,\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n\n\n      }\n\n      handleSubmit = event => {\n\n        event.preventDefault()\n\n        if(this.state.password1 !== this.state.password2){\n          console.log(\"Diff passwords\");          \n          this.setState({passErr: true});\n          return;\n        }\n        console.log(\"HANDLE FORM SUBMIT\");\n\n        const userData = this.state;\n        \n        return fetch(\"/api/v1/auth/register\", {\n            method: 'post',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(userData)\n\n        }).then(resp => {\n            console.log(resp);\n            if(resp.status === 400){\n              this.setState({loginErr : true});\n              console.log(\"Diff logins\");\n              throw new Error(\"login is not unique\");\n            } else {    \n              this.setState({redirect: true});\n            }\n        }).catch(err=>{console.log(err);})\n      }\n     \n    handleChange = event => {\n        this.setState({\n        [event.target.name]: event.target.value,\n        loginErr:false,\n        passErr:false\n    });\n    }\n    \n\n    render() {\n        let userRole;\n        if(this.state.redirect){\n            console.log(\"REGISTER PAGE REDIRECT IS TRUE\");\n            return <Redirect to='/'/>;\n        }\n            return <div>            \n              <HeaderLinks/>\n            <main className=\"loginFormMain\">\n            \n            <form className= \"register\">\n                <div className=\"container\">\n                  <h1>Register</h1>\n                  <p>Please fill in this form to create an account.</p>\n                  \n                  <hr/>\n              \n                  <label>\n                      <b>Login</b>\n                      <input type=\"text\" placeholder=\"Enter Login\" maxLength=\"20\" name=\"login\" value={this.state.login} onChange={this.handleChange} required pattern=\"^(?=.{4,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\" ></input>\n                  </label>\n                  \n        \n                  <label>\n                      <b>Fullname</b>\n                      <input type=\"text\" placeholder=\"Enter Fullname\" maxLength=\"20\" name=\"fullname\" value={this.state.fullname} onChange={this.handleChange} required pattern=\"^(\\w\\w+)\\s(\\w+)$\"></input>\n                  </label>\n                  \n              \n                  <label >\n                      <b>Password</b>\n                     <input type=\"password\" placeholder=\"Enter Password\" maxLength=\"20\" name=\"password1\" value={this.state.password1}  onChange={this.handleChange} required pattern=\"^(?=.{4,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"></input>\n                  </label>\n\n                   <label >\n                      <b>Password</b>\n                  <input type=\"password\" placeholder=\"Enter Password\" maxLength=\"20\" name=\"password2\" value={this.state.password2} onChange={this.handleChange} required pattern=\"^(?=.{4,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"></input>\n                  </label>\n              \n                  \n                  <hr/>\n                  {(this.state.loginErr || this.state.passErr)\n                  ? <ErrorBlock loginErr={this.state.loginErr} passErr={this.state.passErr} />\n                  : <></>\n                  }\n                  <hr/>\n                  \n                  <p>By creating an account you agree to our <a href=\"#\">Terms & Privacy</a>.</p>\n                  <button type=\"submit\" className=\"registerbtn\" onClick ={this.handleSubmit}>Register</button>\n                </div>\n                \n                <div className=\"container signin\">\n                  <p>Already have an account? <Link to=\"/auth/login\">Sign in</Link>.</p>\n                </div>\n              </form>\n        \n          </main>\n          </div>\n    }\n  }\n  \n  export default LoginPage;\n\n","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport HeaderLinks from \"./HeaderLinks\";\n\n\n\nclass LoginPage extends Component {\n    constructor( props ) {\n        super( props );\n        this.state = {\n          username: \"\",\n          password: \"\",\n          redirect: false,\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n\n\n      }\n\n      handleSubmit = event => {\n        event.preventDefault()\n        console.log(\"HANDLE FORM SUBMIT\");\n\n        const userData = { username :this.state.username, password:this.state.password }\n        \n        return fetch(\"/api/v1/auth/login\", {\n            method: 'post',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(userData)\n\n        }).then(resp => {\n            console.log(resp);\n            return resp.json();\n        })\n          .then(data => {\n              console.log(\"DATA:\");\n              console.log(data.response.token);\n            if (data.message) {\n            //  @TODOтут ваша логика\n            } else {\n                localStorage.setItem(\"token\", data.response.token);\n                this.setState({redirect: true});\n            }\n          }).catch(err=>{console.log(err);})\n      }\n     \n    handleChange = event => {\n        this.setState({[event.target.name]: event.target.value});\n    }\n    \n\n    render() {\n        let userRole;\n        console.log(\"RENDERING LOGIN PAGE\");\n        if(this.state.redirect){\n            console.log(\"LOGIN PAGE REDIRECT IS TRUE\");\n            return <Redirect to='/'/>;\n        }\n        // if(localStorage.token){\n        //     console.log(\"LOGIN PAGE RENDER TOKEN IN STOR\");\n        //     return <Redirect to='/'/>;\n        // }\n            return <div>\n            <HeaderLinks/>\n            <main className=\"loginFormMain\">\n\n                <form className= \"register\" onSubmit={this.handleSubmit}>\n                    <div className=\"container\">\n                        <h1>Login</h1>\n                        <p>Please fill in this form to login.</p>\n                        <hr/>\n                \n                        <label for=\"email\"><b>login</b></label>\n                        <input type=\"text\" placeholder=\"Enter login\" name=\"username\" maxlength=\"10\" \n                        required\n                        value={this.state.username}\n                        onChange={this.handleChange}/>\n                \n                        <label for=\"psw\"><b>Password</b></label>\n                    \n                        <input type=\"password\" placeholder=\"Enter Password\" maxlength=\"15\" name=\"password\" \n                        value={this.state.password}\n                        onChange={this.handleChange} \n                        required />\n\n                    <button type=\"submit\" className=\"registerbtn\" >Login</button>\n                    </div>\n            \n                </form>\n        </main>          \n    </div>\n    }\n  }\n  \n  export default LoginPage;\n\n","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\n\nexport default (props) => {\n\tconst {\n\t\t      showPrevLink,\n              showNextLink,\n              pagesCount,\n\t\t      handlePrevClick,\n\t\t      handleNextClick,\n              loading,\n              currPage,\n\t      } = props;\n        \n        if(!pagesCount){\n          console.log(\"results\");\n          return <div></div>\n        }\n    return <ul className=\"pagination pg-amber justify-content-center\" id = \"characsPagUl\">\n          <li className=\"page-item\">\n              <a className={`nav-link ${ showPrevLink ? '' : 'disabled'}${ loading ? 'greyed-out' : '' }`}onClick={handlePrevClick} aria-label=\"Previous\">\n                <span aria-hidden=\"true\">&laquo;</span>\n                <span className=\"sr-only\">Previous</span>\n              </a>\n            </li>\n          \n        <li className=\"page-item  disabled active characPag\"><a className=\"page-link\">{currPage}/{pagesCount}</a></li>\n            \n            <li className=\"page-item\">\n              <a className={`nav-link${ showNextLink ? '' : ' disabled'}${ loading ? 'greyed-out' : '' }`} onClick={handleNextClick} aria-label=\"Next\">\n                <span aria-hidden=\"true\">&raquo;</span>\n                <span className=\"sr-only\">Next</span>\n              </a>\n            </li>\n          </ul>\n          \n};\n\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom'\nimport axios from 'axios';\nimport PageNavigation from \"../widgets/PageNavigation\"\nimport { Redirect } from \"react-router-dom\";\nimport {getCurrUserObj} from \"../myTools\"\nimport HeaderLinks from \"../HeaderLinks.js\"\n\nclass TitleCard extends Component{\n    render(){\n        return <tr>\n        <Link to={`/users/${this.props.user._id}`}><td>{this.props.user.login}</td></Link> \n        <td>{this.props.user.fullname}</td>\n        <td>{new Date(this.props.user.registeredAt).toDateString()}</td>\n      </tr>\n    }\n}\n\n\nclass TitlesPage extends Component {\n  constructor( props ) {\n    super( props );\n\n    let currUser = getCurrUserObj();\n\n    this.state = {\n      query: '',\n      results: {},\n      error: '',\n      message: '',\n      loading: false,\n      totalResults: 0,\n      pagesCount: 0,\n      currentPageNo: 0,\n      userRole: currUser.role,\n      username: currUser.username,\n    };\n    this.cancel = '';\n  }\n\n  getPagesCount = (total, denominator) => {\n    const divisible = total % denominator === 0;\n    const valueToBeAdded = divisible ? 0 : 1;\n    return Math.floor(total / denominator) + valueToBeAdded;\n  };\n\n  handlePageClick = (type) => {\n    const updatedPageNo =\n            'prev' === type\n              ? this.state.currentPageNo - 1\n              : this.state.currentPageNo + 1;\n    if (!this.state.loading) {\n      this.setState({ loading: true, message: '' }, () => {\n        this.fetchSearchResults(updatedPageNo, this.state.query);\n      });\n    }\n  };\n\n  renderSearchResults = () => {\n    console.log(this.state.results);\n    const {results, query} = this.state;\n    console.log(results);\n    \n    if (results && Object.keys(results).length && results.length) {\n\n      const cardsArray = results.map(user=>{\n        return <TitleCard user = {user}/>\n      });\n      return <tbody>{cardsArray}</tbody>;\n    \n    } else {\n        return <div className=\"alert alert-warning\">\n        <h2>  No results for <strong> {query}</strong></h2>\n      </div>\n    }\n  };\n\n  componentDidMount(){\n    this.fetchSearchResults(1, \"\");\n  }\n\n  handleOnInputChange = (event) => {\n    const query = event.target.value;\n    if (!query) {\n      this.setState({ query, results: {}, totalResults: 0, totalPages: 0, currentPageNo: 0, message: '' } );\n      this.fetchSearchResults(1, query);\n    } else {\n      this.setState({ query, loading: true, message: '' }, () => {\n        this.fetchSearchResults(1, query);\n      });\n    }\n  };\n    \n\n  fetchSearchResults = (pageNumber, query ) => {\n    pageNumber = pageNumber || 1;\n  const searchUrl = `/api/v1/users?page=${pageNumber}${query? `&search=${query}` : \"\"}`;\n  if (this.cancel) {\n    this.cancel.cancel();\n  }\n  \n\tthis.cancel = axios.CancelToken.source();\n\taxios\n\t\t.get(searchUrl, {\n      cancelToken: this.cancel.token,\n      headers: {\n        'Authorization': `Bearer ${localStorage.token}`,\n        'Content-Type': 'application/x-www-form-urlencoded'\n    },\n\t\t})\n\t\t.then((res) => {\n      console.log(res);\n\t\t\tconst resultNotFoundMsg = !res.data.resUsers.length\n\t\t\t\t? 'There are no more search results. Please try a new search.'\n        : '';\n\t\t\tthis.setState({\n        currentPageNo : pageNumber,\n        results: res.data.resUsers,\n        pagesCount: res.data.pagesAmount,\n\t\t\t\tmessage: resultNotFoundMsg,\n\t\t\t\tloading: false,\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tif (axios.isCancel(error) || error) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\tmessage: 'Failed to fetch results.Please check network',\n\t\t\t\t});\n\t\t\t}\n\t\t});\n  };\n\n\n  render() { \n    \n    const { query, loading,  currentPageNo, pagesCount, userRole} = this.state;\n    const showPrevLink = 1 < currentPageNo;\n    const showNextLink = pagesCount > currentPageNo;\n    if(userRole !== 1 && userRole !== 0 ){\n      return <Redirect to='/auth/login'/>;\n    }\n\n    return <div>\n    <HeaderLinks/>  \n  <main>\n  <input type=\"text\" name=\"search\" value={query} id=\"characSearch\" className= \"entitySearch\" placeholder=\"Search..\" onChange={this.handleOnInputChange}/>\n    <div class=\"table\">\n      <table>\n        <thead>\n        <tr class=\"table-head\">\n          <th>Login</th>\n          <th>Fullname</th>\n          <th>Registred</th>\n        </tr>\n        </thead>\n        { this.renderSearchResults() }\n        \n      </table>\n    </div>\n       <PageNavigation\n        loading={loading}\n        showPrevLink={showPrevLink}\n        showNextLink={showNextLink}\n        currPage = {currentPageNo}\n        pagesCount = {pagesCount}\n        handlePrevClick={() => this.handlePageClick('prev')}\n        handleNextClick={() => this.handlePageClick('next')}/>\n      {this.state.userRole ===1 ?\n       <div className=\"adminButtons\">\n          <p>Admin abilities:</p>\n        \n            <button type=\"button\" className=\"btn btn-info\" >\n            Some admin Feature</button>\n            <button type=\"button\" className=\"btn btn-warning\" >\n            Another admin Feature</button>\n            </div> : <></>}\n  </main>\n</div>\n  }\n};\n\nexport default TitlesPage;\n\n","import React, {Component} from 'react'\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\n\n\n\n\n\n\nclass DeleteModal extends Component{\n  constructor( props ) {\n    super( props );\n\n    this.state = {    \n      redirect:false,\n    };\n    this.cancel=\"\";\n  }\n\n  deleteClickHandler = event =>{\n    this.fetchSearchResults();\n  }\n\n\n\n  fetchSearchResults = () => {\n        \n    const searchUrl = this.props.targetApiUrl;\n    \n    if (this.cancel) {\n      this.cancel.cancel();\n    }\n    this.cancel = axios.CancelToken.source();\n    fetch(searchUrl, {\n      method : \"delete\",\n      headers: {\n        'Authorization': `Bearer ${localStorage.token}`,\n    },}).then((res) => {\n      \n         this.setState({\n          redirect: true  \n        });\n      })\n    };\n  \n    render() {\n      if(this.state.redirect){\n        return <Redirect to={this.props.returnLink}/>\n      }\n      \n      return <div className=\"modal fade\" id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\" id=\"exampleModalLongTitle\">Confirm action</h5>\n          \n          <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n\n        </div>\n          <div className=\"modal-body\">\n            Are you sure to delete {this.props.entityName}?\n          </div>\n          <div className=\"modal-footer\">\n          \n          <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n  \n          <div>\n            \n              <input type=\"button\" name=\"delete Char\" data-dismiss=\"modal\" className=\"btn btn-danger\"value=\"Delete Char\" onClick={this.deleteClickHandler} /> \n            \n          </div>\n      \n        </div>\n      </div>\n    </div>\n  </div>\n    }\n}\n\nexport default DeleteModal;","import React, { Component } from \"react\";\nimport axios from 'axios';\nimport ModalDelete from \"../widgets/ModalDelete\"\nimport { Link, Redirect } from \"react-router-dom\";\nimport jwtDecode from \"jwt-decode\"\nimport HeaderLinks from \"../HeaderLinks.js\"\nimport {getUserRole, updateAuth, getCurrUserObj} from \"../myTools\"\n\nclass CharacterPage extends Component {\n    \n    constructor( props ) {\n        super( props );\n        \n        let queryStrArr = this.props.location.pathname.split(\"/\");\n        let pageUserId = queryStrArr[queryStrArr.length - 1];\n        \n        let currUser = getCurrUserObj();\n        this.state = {\n          pageUserId : pageUserId ,\n          userRole : currUser.role,\n          userId : currUser._id,\n          username : currUser.username,\n        };\n        this.cancel=\"\";\n      }\n     \n      componentDidMount = () => {\n          this.fetchSearchResults();\n      } \n\n      fetchSearchResults = () => {\n        const searchUrl = `/api/v1/users/${this.state.pageUserId}`;\n        \n        if (this.cancel) {\n          this.cancel.cancel();\n        }\n\n        this.cancel = axios.CancelToken.source();\n        axios\n          .get(searchUrl, {\n            cancelToken: this.cancel.token,\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          })\n          .then((res) => {\n             this.setState({\n              user: res.data  \n            });\n          })\n        };\n\n\n\n  render() { \n      if(!this.state.userId){\n          return <Redirect to=\"/\"/>\n      }\n    if(!this.state.user){\n      return <div><h1>ERROR</h1></div>\n    }\n    const user = this.state.user;\n    const content = `CONTENT HERE `\n    return <div>\n      <HeaderLinks/>\n    <main>\n        <div className=\"entitiy-page-wrapper\">\n\n        <div className=\"entity-page-image\">\n            <img src={user.image} alt=\"\"/>\n        </div>\n\n        <div className=\"entity-page-info\">\n            <div className=\"table\">\n                <table>\n                  <tbody>\n\n                    <tr>\n                        <td>Fullname:</td>\n                        <td>{user.fullname}</td>\n                    </tr>\n                    <tr>\n                        <td>Login:</td>\n                        <td>{user.login}</td>\n                    </tr>\n                    <tr>\n                        <td>Registration date:</td>\n                        <td>{new Date(user.registeredAt).toDateString()}</td>\n                    </tr>\n                    </tbody>\n\n                </table>\n            </div>\n            <div className=\"table\">\n                <table>\n                  <tbody>\n                    <tr>\n                        <td>User role:</td>\n                        <td>{user.role \n                            ? \"Admin\"\n                            : \"User\"}</td>\n                    </tr>\n                    <tr>\n                        <td>Info:</td>\n                        <td>---</td>\n                    </tr>\n                    <tr>\n                        <td>Info:</td>\n                        <td>---</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        </div>\n        {this.state.pageUserId === user._id \n        ? <div className=\"adminButtons\">\n        <p>Config:</p>\n        \n        {/* SETTINGS */}\n          <Link className=\"btn btn-warning\" to={`/updateUser/${user._id}`}>Update info</Link>\n        </div>\n        : <></>\n        }\n        {/* ADMIN */}\n        {this.state.userRole === 1 \n        ? <div className=\"adminButtons\">\n        <p>Admin features:</p>\n        \n        {/* @todo delete user, add modal */}\n        <button type=\"button\" className=\"btn btn-danger\" data-toggle=\"modal\" data-target=\"#exampleModalCenter\">\n          Delete charac</button>\n          {user.role === 0 \n          ?<button type=\"button\" class=\"btn btn-primary\">Make Admin</button> \n          :<button type=\"button\" class=\"btn btn-primary\">Make User</button> \n          }\n          \n          <Link className=\"btn btn-warning\" to={`/updateUser/${user._id}`}>Update info</Link>\n        </div>\n        : <></>\n        }\n        \n    {/* #isAdmin\n      #isUserAdmin\n        <div><form action = \"/admin/makeAdminUser\" method = \"POST\">\n            <input type=\"submit\" name=\"makeUser\" className=\"btn btn-danger\"value=\"Make user\">\n        </form> </div>\n      /isUserAdmin\n      ^isUserAdmin\n        <div><form action = \"/admin/makeUserAdmin\" method = \"POST\">\n            <input type=\"submit\" name=\"makeAdmin\" className=\"btn btn-danger\"value=\"Make admin\">\n        </form> </div>\n      /isUserAdmin\n    /isAdmin */}\n  </main>\n</div>\n  }\n};\n\nexport default CharacterPage;\n\n","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport HeaderLinks from \"../HeaderLinks\";\n\n\nclass UpdateUserPage extends Component {\n    constructor( props ) {\n        super( props );\n\n        this.fileInput = React.createRef();\n\n        this.state = {\n          login: \"\",\n          fullname: \"\",\n          image: undefined,\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n\n\n      }\n\n    componentDidMount(){\n        let queryStrArr = this.props.location.pathname.split(\"/\");\n        let userId = queryStrArr[queryStrArr.length - 1];\n    \n        const searchUrl = `/api/v1/users/${userId}`;\n    \n        fetch(searchUrl, {\n            method: \"get\",\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          }).then(row=>row.json())\n          .then((res) => {\n             this.setState({\n              targetUser: res,\n              tgLogin :res.tgLogin, \n              login: res.login,\n              fullname: res.fullname,\n              imageUrl : res.image,\n              chatId : res.chatId,\n              subscribes : res.subscribes,\n            });\n          })\n          .catch((error) => {\n          });\n        }\n\n    handleSubmit = event => {\n        event.preventDefault()\n        \n        const userData = {\n            password : this.state.targetUser.password,\n            registeredAt : this.state.targetUser.registeredAt,\n            fullname: this.state.fullname,\n            login: this.state.login,\n            tgLogin : this.state.tgLogin,\n            chatId : this.state.chatId,\n            image: this.state.image,\n            imageUrl:  this.state.imageUrl,\n            subscribes : this.state.subscribes\n        }\n        \n        const formData  = new FormData();\n\n        for(const name in userData) {\n            formData.append(name, userData[name]);\n        }\n\n        return fetch(`/api/v1/users/${this.state.targetUser._id}`, {\n            method: 'put',\n            headers: {\n            'Authorization': `Bearer ${localStorage.token}`,\n        },\n            body: formData\n        }).then(resp => {\n            return resp.json();\n        })\n          .then(data => {\n              this.setState({redirect: data._id});\n          }).catch(err=>{console.log(err);})\n      }\n   \n  handleChange = event => {\n      this.setState({[event.target.name]: event.target.value});\n  }\n  \n  handleFileInput = e =>{\n      const files = Array.from(e.target.files);      \n      this.setState({\n        image : files[0],\n        imageUrl : URL.createObjectURL(files[0]),\n    });\n\n  }\n  cancelUpdateHandler = ()=>{\n      this.setState({redirect: `${this.state.characId}`})\n  }\n\n  render() {\n    if(this.state.redirect){\n        return <Redirect to={`/users/${this.state.redirect}`}/>;\n    }\n    \n    return <div> <HeaderLinks/> \n      <main>\n    <form className= \"new-charac-form\" encType=\"multipart/form-data\" onSubmit={this.handleSubmit}>\n    <div className=\"new-charac-input-div\">\n\n    <div className=\"form-group-big\">\n\n        <div className=\"form-group\">\n            <label>\n                Fullname:\n                <input type=\"text\" className=\"form-control\" value={this.state.fullname} name=\"fullname\" onChange={this.handleChange} required pattern=\"^(\\w\\w+)\\s(\\w+)$\"/>\n            </label>\n        </div>\n\n    <div className=\"form-group\">\n        <label >Login:\n            <input type=\"text\"  className=\"form-control\" value={this.state.login} name=\"login\" onChange={this.handleChange} required pattern=\"^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n        </label>\n    </div>\n    <div className=\"form-group\">\n        <label >Telegramm Login:\n            <input type=\"text\"  className=\"form-control\" value={this.state.tgLogin} name=\"tgLogin\" onChange={this.handleChange} required pattern=\"^(?=.{1,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n        </label>\n    </div>\n\n{/* \n    <div className=\"form-group\">\n        <label >:\n            <input type=\"text\"  className=\"form-control\" value={charac.alias} name=\"Alias\" onChange={this.handleChange} required pattern=\"^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n        </label>\n    </div> */}\n    \n</div>\n\n<div className=\"form-group-big\">\n         <legend>Photo</legend>\n         <button type=\"button\" className=\"btn btn-info\">\n            <label htmlFor=\"createCharacImageInput\">Choose a file</label>  \n         </button>\n         <div>\n            <img className=\"formPreviewImage\" src={this.state.imageUrl} alt=\"\" />\n         </div>\n         {/* Not Visible */}\n         <input type=\"file\" name=\"userImage\" id=\"createCharacImageInput\" ref={this.fileInput} onChange={this.handleFileInput} className=\"image-inputfile\"/>\n\n</div>\n\n</div>\n    <br/>\n    <hr/>\n    \n    <input type=\"submit\" className=\"btn btn-warning\" value=\"Update User\"/>\n    <input type=\"submit\" className=\"btn btn-secondary\" value=\"Cancel\" onClick = {this.cancelUpdateHandler}/>\n\n</form>\n</main>\n\n</div>\n}\n}\n  \nexport default UpdateUserPage;\n","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport HeaderLinks from \"../HeaderLinks\";\n\n\nclass CreateCharacterPage extends Component {\n    constructor( props ) {\n        super( props );\n        this.fileInput = React.createRef();\n        this.state = {\n          name: \"\",\n          fullname: \"\",\n          characDescr: \"Character description......\",\n          age: -1,\n          alias: \"\",\n          image: undefined,\n          imageUrl: \"\",\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n\n\n      }\n   \n    \n    handleSubmit = event => {\n        event.preventDefault()\n        \n        console.log(\"HANDLE FORM SUBMIT\");\n        \n        const userData = { name :this.state.name,\n            fullname:this.state.fullname,\n            description:this.state.characDescr,\n            age: this.state.age,\n            alias : this.state.alias,\n            characPic: this.state.image, }\n        console.log(userData);\n        \n        const formData  = new FormData();\n\n        for(const name in userData) {\n            formData.append(name, userData[name]);\n        }\n\n        return fetch(\"/api/v1/characters\", {\n            method: 'post',\n            headers: {\n        'Authorization': `Bearer ${localStorage.token}`,\n        },\n            body: formData\n        }).then(resp => {\n            console.log(resp);\n            return resp.json();\n        })\n          .then(data => {\n              console.log(\"DATA:\");\n              console.log(data);\n\n              this.setState({redirect: data._id});\n\n          }).catch(err=>{console.log(err);})\n      }\n   \n  handleChange = event => {\n      this.setState({[event.target.name]: event.target.value});\n      console.log(\"Handling input\");\n      console.log(this.state);\n  }\n  handleFileInput = e =>{\n    //   console.log(e.target.files);\n      const files = Array.from(e.target.files);\n      console.log();\n      this.setState({image : files[0],\n                    imageUrl : URL.createObjectURL(files[0])\n    });\n\n  }\n\n  \n    \n  \n    \n  \n\n    render() {\n        let userRole;\n        console.log(\"RENDERING New CHarac PAGE\");\n        if(this.state.redirect){\n            console.log(\"LOGIN PAGE REDIRECT IS TRUE\");\n            return <Redirect to={`/characters/${this.state.redirect}`}/>;\n        }\n        \n        return <div> <HeaderLinks/> \n          <main>\n        <form className= \"new-charac-form\" encType=\"multipart/form-data\" onSubmit={this.handleSubmit}>\n        <div className=\"new-charac-input-div\">\n\n        <div className=\"form-group-big\">\n\n            <div className=\"form-group\">\n                <label>\n                    Name:\n                    <input type=\"text\" className=\"form-control\" placeholder=\"Enter name\" name=\"name\" onChange={this.handleChange} required pattern=\"^(?=.{4,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n                </label>\n            </div>\n\n        <div className=\"form-group\">\n            <label >Full Name:\n                <input type=\"text\"  className=\"form-control\" placeholder=\"Enter Fullname\" name=\"fullname\" onChange={this.handleChange} required pattern=\"^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n            </label>\n        </div>\n\n        \n        <div className=\"form-group\">\n            <label >Age:\n                <input type=\"number\" min=\"1\" max=\"9999999\" name=\"age\" value={this.state.age} onChange={this.handleChange} required />\n            </label>\n        </div>\n\n        <div className=\"form-group\">\n            <label >Alias:\n                <input type=\"text\"  className=\"form-control\" placeholder=\"Enter Alias\" name=\"alias\" onChange={this.handleChange} required pattern=\"^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n            </label>\n        </div>\n        \n    </div>\n    <div className=\"form-group-big\">\n             <legend>Description</legend>\n             <textarea name=\"characDescr\" value={this.state.characDescr}  onChange={this.handleChange}></textarea>\n\n    </div>\n    <div className=\"form-group-big\">\n             <legend>Photo</legend>\n             <button type=\"button\" className=\"btn btn-info\">\n                <label htmlFor=\"createCharacImageInput\" >Choose a file</label>  \n             </button>\n             <div>\n                <img className=\"formPreviewImage\" src={this.state.imageUrl} alt=\"\" />\n             </div>\n             {/* Not Visible */}\n             <input type=\"file\" name=\"characPict\" id=\"createCharacImageInput\" ref={this.fileInput} onChange={this.handleFileInput} className=\"image-inputfile\"/>\n             \n\n\n    </div>\n    \n    </div>\n\n        <br/>\n        <hr/>\n    <input type=\"submit\" className=\"btn btn-primary\" value=\"Create new character\" />\n\n    </form>\n    </main>\n\n    </div>\n}\n}\n  \nexport default CreateCharacterPage;\n","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport HeaderLinks from \"../HeaderLinks\";\n\n\nclass UpdateCharacterPage extends Component {\n    constructor( props ) {\n        super( props );\n\n        \n        this.fileInput = React.createRef();\n\n        this.state = {\n          name: \"dddddd\",\n          fullname: \"dddddd\",\n          characDescr: \"Character description......\",\n          alias : \"-\",\n          age: -1,\n          image: undefined,\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n\n\n      }\n\n    componentDidMount(){\n        console.log(\"\");\n        let queryStrArr = this.props.location.pathname.split(\"/\");\n        let characId = queryStrArr[queryStrArr.length - 1];\n    \n        const searchUrl = `/api/v1/characters/${characId}`;\n    \n        fetch(searchUrl, {\n            method: \"get\",\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          }).then(row=>row.json())\n          .then((res) => {\n              console.log(\"update Charac fetch result:\");\n              console.log(res);\n             this.setState({\n              character: res,\n              name: res.name,\n              fullname: res.fullname,\n              characDescr: res.characDescr,\n              alias : res.alias,\n              age: res.age,\n              imageUrl: res.image,\n              characId : characId,\n              image: undefined,  \n            });\n          })\n          .catch((error) => {\n          });\n        }\n    \n     \n    onFilesError =  (error, file) => {\n        console.log('error code ' + error.code + ': ' + error.message)\n    }\n\n    \n    \n    handleSubmit = event => {\n        event.preventDefault()\n        \n        console.log(\"HANDLE FORM SUBMIT\");\n        console.log(this.state);\n        const userData = { name :this.state.name,\n            fullname:this.state.fullname,\n            characDescr:this.state.characDescr,\n            age: this.state.age,\n            image: this.state.image,\n            description: this.state.characDescr,\n            alias:this.state.alias,\n            imageUrl:  this.state.imageUrl,\n            prevChar : this.state.character\n        }\n        console.log(userData);\n        \n        const formData  = new FormData();\n\n        for(const name in userData) {\n            formData.append(name, userData[name]);\n        }\n\n        return fetch(`/api/v1/characters/${this.state.characId}`, {\n            method: 'put',\n            headers: {\n            'Authorization': `Bearer ${localStorage.token}`,\n        },\n            body: formData\n        }).then(resp => {\n            console.log(resp);\n            return resp.json();\n        })\n          .then(data => {\n              console.log(\"DATA:\");\n              console.log(data);\n\n              this.setState({redirect: data._id});\n\n          }).catch(err=>{console.log(err);})\n      }\n   \n  handleChange = event => {\n      this.setState({[event.target.name]: event.target.value});\n      console.log(\"Handling input\");\n      console.log(this.state);\n  }\n  \n\n  handleFileInput = e =>{\n    //   console.log(e.target.files);\n      const files = Array.from(e.target.files);      \n      this.setState({\n        image : files[0],\n        imageUrl : URL.createObjectURL(files[0]),\n    });\n\n  }\n  cancelUpdateHandler = ()=>{\n      this.setState({redirect: `${this.state.characId}`})\n  }\n    \n  \n    \n  \n\n  render() {\n    let userRole;\n    console.log(\"RENDERING New CHarac PAGE\");\n    if(this.state.redirect){\n        console.log(\"LOGIN PAGE REDIRECT IS TRUE\");\n        return <Redirect to={`/characters/${this.state.redirect}`}/>;\n    }\n    const charac = this.state\n    \n    return <div> <HeaderLinks/> \n      <main>\n    <form className= \"new-charac-form\" encType=\"multipart/form-data\" onSubmit={this.handleSubmit}>\n    <div className=\"new-charac-input-div\">\n\n    <div className=\"form-group-big\">\n\n        <div className=\"form-group\">\n            <label>\n                Name:\n                <input type=\"text\" className=\"form-control\" value={charac.name} name=\"name\" onChange={this.handleChange} required pattern=\"^(?=.{4,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n            </label>\n        </div>\n\n    <div className=\"form-group\">\n        <label >Full Name:\n            <input type=\"text\"  className=\"form-control\" value={charac.fullname} name=\"fullname\" onChange={this.handleChange} required pattern=\"^(\\w\\w+)\\s(\\w+)$\"/>\n        </label>\n    </div>\n\n    \n    <div className=\"form-group\">\n        <label >Age:\n            <input type=\"number\" min=\"1\" max=\"9999999\" name=\"age\" value={charac.age} onChange={this.handleChange} required />\n        </label>\n    </div>\n\n    <div className=\"form-group\">\n        <label >Alias:\n            <input type=\"text\"  className=\"form-control\" value={charac.alias} name=\"alias\" onChange={this.handleChange} required pattern=\"^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n        </label>\n    </div>\n    \n</div>\n<div className=\"form-group-big\">\n         <legend>Description</legend>\n         <textarea name=\"characDescr\" value={this.state.characDescr}  onChange={this.handleChange}></textarea>\n\n</div>\n<div className=\"form-group-big\">\n         <legend>Photo</legend>\n         <button type=\"button\" className=\"btn btn-info\">\n            <label htmlFor=\"createCharacImageInput\" >Choose a file</label>  \n         </button>\n         <div>\n            <img className=\"formPreviewImage\" src={this.state.imageUrl} alt=\"\" />\n         </div>\n         {/* Not Visible */}\n         <input type=\"file\" name=\"characPict\" id=\"createCharacImageInput\" ref={this.fileInput} onChange={this.handleFileInput} className=\"image-inputfile\"/>\n\n</div>\n\n</div>\n    <br/>\n    <hr/>\n    \n    <input type=\"submit\" className=\"btn btn-warning\" value=\"Update Character\"/>\n    <input type=\"submit\" className=\"btn btn-secondary\" value=\"Cancel\" onClick = {this.cancelUpdateHandler}/>\n\n</form>\n</main>\n\n</div>\n}\n}\n  \nexport default UpdateCharacterPage;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom'\nimport axios from 'axios';\nimport PageNavigation from \"../widgets/PageNavigation\"\nimport { Redirect } from \"react-router-dom\";\nimport jwtDecode from \"jwt-decode\"\nimport HeaderLinks from \"../HeaderLinks.js\"\n\nclass CharacterCard extends Component{\n    render(){\n\n        let characImg = this.props.charac.image;\n        let characName = this.props.charac.name;\n        let characId = this.props.charac._id;\n\n        \n        return <div className=\"card border-dark mb-3\">\n            <div className=\"card-img-wrapper\">\n              <Link to={\"/characters/\" + characId}>\n                <img src={`${characImg}`} className=\"card-img-top\"  alt=\"...\"></img>\n              </Link>\n            </div>\n        \n            <div className=\"card-body justify-content-between\">\n            <h5 className=\"card-title\">{characName}</h5>\n            <Link to={\"/characters/\" + characId}>\n                <button className=\"btn btn-secondary\">Details</button>\n            </Link> \n            </div>\n        </div>\n    }\n}\n\n\n\nclass CharactersPage extends Component {\n  constructor( props ) {\n    super( props );\n\n      let userRole = -1;\n      let username = \"\";\n        // console.log(\"localStorage.token\");\n        // console.log(localStorage.token);\n        // console.log(localStorage);\n      if(!localStorage.token){\n          userRole = -1;\n      } else {\n          let user = jwtDecode(localStorage.token);\n          userRole = user.role;\n          username = user.username;\n      }\n\n    this.state = {\n      query: '',\n      results: {},\n      error: '',\n      message: '',\n      loading: false,\n      totalResults: 0,\n      pagesCount: 0,\n      currentPageNo: 0,\n      userRole: userRole,\n      username: username,\n      \n    };\n    this.cancel = '';\n  }\n\n  getPagesCount = (total, denominator) => {\n    const divisible = total % denominator === 0;\n    const valueToBeAdded = divisible ? 0 : 1;\n    return Math.floor(total / denominator) + valueToBeAdded;\n  };\n\n  handlePageClick = (type) => {\n    // event.preventDefault();\n    const updatedPageNo =\n            'prev' === type\n              ? this.state.currentPageNo - 1\n              : this.state.currentPageNo + 1;\n    if (!this.state.loading) {\n      this.setState({ loading: true, message: '' }, () => {\n        //console(\"Updating!!\");\n        //console(updatedPageNo);\n        this.fetchSearchResults(updatedPageNo, this.state.query);\n      });\n    }\n  };\n  renderSearchResults = () => {\n    const {results, query} = this.state;\n    // console.log(\"state\");\n    // console.log(this.state);\n    \n    if (results && Object.keys(results).length && results.length) {\n\n      const cardsArray = results.map(charac=>{\n        //console(\"CHARAC\");\n        //console(charac);\n        return <CharacterCard charac = {charac}/>\n      });\n\n      return <div className=\"entities-wrapper\" id = \"characters-div\">{cardsArray}</div>;\n    } else {\n        //console(\"NO RESULTS\");\n        return <div class=\"alert alert-warning\">\n        <h2>  No results for <strong> {query}</strong></h2>\n      </div>\n     \n    }\n  };\n  componentDidMount(){\n    this.fetchSearchResults(1, \"\");\n  }\n\n\n  handleOnInputChange = (event) => {\n    const query = event.target.value;\n    if ( ! query ) {\n      this.setState({ query, results: {}, totalResults: 0, totalPages: 0, currentPageNo: 0, message: '' } );\n      this.fetchSearchResults(1, query);\n    } else {\n      this.setState({ query, loading: true, message: '' }, () => {\n        this.fetchSearchResults(1, query);\n      });\n    }\n  };\n    \n\n  fetchSearchResults = (pageNumber = 1, query ) => {\n  // ${titleId ? `&title=${titleId}` : \"\"}\n  // By default the limit of results is 20\n    pageNumber = pageNumber || 1;\n    \n// const searchUrl = `https://pixabay.com/api/?key=12413278-79b713c7e196c7a3defb5330e&q=${query}${pageNumber}`;\n  const searchUrl = `/api/v1/characters?page=${pageNumber}${query? `&search=${query}` : \"\"}`;\n  //console(`Seach url: ${searchUrl}`);\n  if (this.cancel) {\n  // Cancel the previous request before making a new request\n    this.cancel.cancel();\n  }\n  \n\t// Create a new CancelToken\n\tthis.cancel = axios.CancelToken.source();\n\taxios\n\t\t.get(searchUrl, {\n      cancelToken: this.cancel.token,\n      headers: {\n        'Authorization': `Bearer ${localStorage.token}`,\n        'Content-Type': 'application/x-www-form-urlencoded'\n    },\n\t\t})\n\t\t.then((res) => {\n      //console(`Fetch res:`);\n      //console(res);\n\t\t\tconst resultNotFoundMsg = !res.data.resCharacs.length\n\t\t\t\t? 'There are no more search results. Please try a new search.'\n        : '';\n\t\t\tthis.setState({\n        currentPageNo : pageNumber,\n        results: res.data.resCharacs,\n        pagesCount: res.data.pagesAmount,\n\t\t\t\tmessage: resultNotFoundMsg,\n\t\t\t\tloading: false,\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tif (axios.isCancel(error) || error) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\tmessage: 'Failed to fetch results.Please check network',\n\t\t\t\t});\n\t\t\t}\n\t\t});\n  };\n\n\n  render() { \n    // const { query } = this.state;\n    // console.log(\"Render Query:\");\n    // console.log(query);\n    const { query, loading,  currentPageNo, pagesCount, userRole, username } = this.state;\n// showPrevLink will be false, when on the 1st page, hence Prev link be shown on 1st page.\n    const showPrevLink = 1 < currentPageNo;\n// showNextLink will be false, when on the last page, hence Next link wont be shown last page.\n    const showNextLink = pagesCount > currentPageNo;\n    //console(showNextLink);\n    //console(pagesCount + \" total ==== curr  \" + currentPageNo);\n    if(userRole ===-1){\n      return <Redirect to='/auth/login'/>;\n    }\n\n    return <div>\n    <HeaderLinks/>\n\n      <div className=\"filter-box\">\n        <aside className=\"filters\">\n          <p>Some filters here</p>\n          {this.props.isAdmin ? <form action = \"/newCharacter\" method = \"GET\">\n              <input type=\"submit\" className=\"btn btn-info\" value=\"New Title\"></input>\n            </form> : <></>}\n            </aside>\n        <aside className=\"filters\">\n        <p>And here</p>\n      </aside>\n      </div>\n  \n      <main className=\"entities-main\">\n        \n    <input type=\"text\" name=\"search\" value={query} id=\"characSearch\" className= \"entitySearch\" placeholder=\"Search..\" onChange={this.handleOnInputChange}/>\n    \n    <div className=\"card-deck\">\n\n      {/* characters */}\n      { this.renderSearchResults() }\n\n    </div>\n    {/* PAGINATION */}\n       <PageNavigation\n        loading={loading}\n        showPrevLink={showPrevLink}\n        showNextLink={showNextLink}\n        currPage = {currentPageNo}\n        pagesCount = {pagesCount}\n        handlePrevClick={() => this.handlePageClick('prev')}\n        handleNextClick={() => this.handlePageClick('next')}/>\n      {this.state.userRole ===1 ?\n       <div className=\"adminButtons\">\n         <p>Admin abilities:</p>\n        <Link to=\"/newCharacter\" className=\"btn btn-success\">Create charac</Link>\n        \n            <button type=\"button\" className=\"btn btn-info\" >\n            Some admin Feature</button>\n            <button type=\"button\" className=\"btn btn-warning\" >\n            Another admin Feature</button>\n            </div> : <></>}\n  </main>\n  </div>\n  }\n};\n\nexport default CharactersPage;\n\n","import React, { Component } from \"react\";\nimport axios from 'axios';\nimport ModalDelete from \"../widgets/ModalDelete\"\nimport { Link, Redirect } from \"react-router-dom\";\nimport jwtDecode from \"jwt-decode\"\nimport HeaderLinks from \"../HeaderLinks.js\"\nimport {getCurrUserObj} from \"../myTools\"\nclass CharacterPage extends Component {\n    \n    constructor( props ) {\n        super( props );\n        let queryStrArr = this.props.location.pathname.split(\"/\");\n        let characId = queryStrArr[queryStrArr.length - 1];\n        \n        \n        let currUser = getCurrUserObj();\n        this.state = {\n          userId : currUser._id,\n          userRole: currUser.role,\n          tgLogin: currUser.tgLogin,\n          characId : characId\n        };\n        this.cancel=\"\";\n      }\n      componentDidMount(){\n        this.fetchSearchResults();\n      }\n    \n      fetchSearchResults = () => {\n        const searchUrl = `/api/v1/characters/${this.state.characId}`;\n        \n        if (this.cancel) {\n          this.cancel.cancel();\n        }\n\n        this.cancel = axios.CancelToken.source();\n        axios\n          .get(searchUrl, {\n            cancelToken: this.cancel.token,\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          })\n          .then((res) => {\n             this.setState({\n              character: res.data  \n            });\n          })\n          .catch((error) => {\n          });\n        };\n\n  handleSubscription = ()=>{\n    return fetch(\"/api/v1/createSubscription\", {\n            method: 'post',\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({characId : this.state.character._id,\n              userId: this.state.userId\n            })\n\n        }).then(resp => {\n            console.log(resp);\n            return resp.json();\n        }).then(data=>{\n          console.log(data);\n          this.setState({\n              character: data  \n            });\n        })\n  }\n\n  handleUnSubscription = ()=>{\n    return fetch(\"/api/v1/deleteSubscription\", {\n            method: 'post',\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(\n              {\n              characId : this.state.character._id,\n              userId: this.state.userId\n            })\n\n        }).then(resp => {\n            console.log(resp);\n            return resp.json();\n        }).then(data=>{\n          console.log(data);\n          this.setState({\n              character: data  \n            });\n        })\n  }\n\n  renderTgButton = ()=>{\n    if(this.state.character.subscribers.includes(this.state.userId)){\n      return <div className=\"adminButtons\">\n      <p>User Buttons:</p>\n      <button type=\"button\" className=\"btn btn-danger\"onClick = {this.handleUnSubscription} >Unsubscribe</button>\n    </div>\n    } else {\n      return <div className=\"adminButtons\">\n      <p>User Buttons:</p>\n      <button type=\"button\" className=\"btn btn-primary\" onClick = {this.handleSubscription}>Subscribe</button>\n    </div>\n    }\n  }\n\n\n  render() { \n    if(!this.state.character){\n      return <div><h1>ERROR</h1></div>\n    }\n    const charac = this.state.character;\n    return <div>\n      <HeaderLinks/>\n      <main>\n    <h2>{`${charac.name} ${charac.fullname}`}</h2>\n    <div className=\"entitiy-page-wrapper\">\n\n        <div className=\"entity-page-image\">\n            <img src={charac.image} alt=\"\"/>\n        </div>\n\n        <div className=\"entity-page-info\">\n            <div className=\"table\">\n                <table>\n                  <tbody>\n\n                    <tr>\n                        <td>name:</td>\n                        <td>{charac.name}</td>\n                    </tr>\n                    <tr>\n                        <td>fullname:</td>\n                        <td>{charac.fullname}</td>\n                    </tr>\n                    <tr>\n                        <td>Was added:</td>\n                        <td>{new Date(charac.addedAt).toDateString()}</td>\n                    </tr>\n                    </tbody>\n\n                </table>\n            </div>\n            <div className=\"table\">\n                <table>\n                  <tbody>\n                    <tr>\n                        <td>Age:</td>\n                        <td>{charac.age}</td>\n                    </tr>\n                    <tr>\n                        <td>Info:</td>\n                        <td>---</td>\n                    </tr>\n                    <tr>\n                        <td>Info:</td>\n                        <td>---</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n\n            <h3>Character Bio</h3>\n        <div className=\"entity-page-main\">\n            {charac.description}\n        </div>\n        \n\n        \n\n       \n        <h3>Photo collection:</h3>\n        \n\n        <div className=\"entity-page-footer\">\n            <p>Some other text and abilities here without border and block</p>\n        </div>\n\n        {this.state.tgLogin ? this.renderTgButton() : <></>}\n\n\n        {this.state.userRole===1 \n        ? <div className=\"adminButtons\">\n            <p>Admin abilities:</p>\n            \n            <button type=\"button\" className=\"btn btn-danger\" data-toggle=\"modal\" data-target=\"#exampleModalCenter\">\n              Delete charac</button>\n\n              <button type=\"button\" className=\"btn btn-warning\"><Link to={`/updateCharacter/${charac._id}`}>Update charac</Link></button>\n          </div> \n        : <></>}\n\n\n    </div>\n\n\n\n</main>\n    {this.state.userRole===1 ? <ModalDelete entityName={`character ${charac.name}`}\n                                            targetApiUrl={`/api/v1/characters/${charac._id}`}\n                                            returnLink={`/characters`}\n    /> : <></>}\n</div>\n  }\n};\n\nexport default CharacterPage;\n\n// PHOTO GALLARY\n// <div className=\"entity-page-photo-collection\">\n\n//<div className=\"entity-page-image\">\n//{/* {{! <img src=\"../images/maushi1.jpeg\" alt=\"\"> }} */}\n//</div>\n//<div className=\"entity-page-image\">\n//{/* {{! <img src=\"../images/maushi2.jpeg\" alt=\"\"> }} */}\n//</div>\n//<div className=\"entity-page-photo-collection\">\n\n//</div> \n// </div>","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport HeaderLinks from \"../HeaderLinks\";\n\n\nclass CreateCharacterPage extends Component {\n    constructor( props ) {\n        super( props );\n        this.fileInput = React.createRef();\n        this.state = {\n          name: \"\",\n          fullname: \"\",\n          characDescr: \"Character description......\",\n          age: -1,\n          alias: \"\",\n          image: undefined,\n          imageUrl: \"\",\n        };\n        this.handleSubmit = this.handleSubmit.bind(this);\n\n\n      }\n   \n    \n    handleSubmit = event => {\n        event.preventDefault()\n        \n        console.log(\"HANDLE FORM SUBMIT\");\n        \n        const userData = { name :this.state.name,\n            fullname:this.state.fullname,\n            description:this.state.description,\n            age: this.state.age,\n            alias : this.state.alias,\n            characPic: this.state.image, }\n        console.log(userData);\n        \n        const formData  = new FormData();\n\n        for(const name in userData) {\n            formData.append(name, userData[name]);\n        }\n\n        return fetch(\"/api/v1/characters\", {\n            method: 'post',\n            headers: {\n        'Authorization': `Bearer ${localStorage.token}`,\n        },\n            body: formData\n        }).then(resp => {\n            console.log(resp);\n            return resp.json();\n        })\n          .then(data => {\n              console.log(\"DATA:\");\n              console.log(data);\n\n              this.setState({redirect: data._id});\n\n          }).catch(err=>{console.log(err);})\n      }\n   \n  handleChange = event => {\n      this.setState({[event.target.name]: event.target.value});\n      console.log(\"Handling input\");\n      console.log(this.state);\n  }\n  handleFileInput = e =>{\n    //   console.log(e.target.files);\n      const files = Array.from(e.target.files);\n      console.log();\n      this.setState({image : files[0],\n                    imageUrl : URL.createObjectURL(files[0])\n    });\n\n  }\n\n  \n    \n  \n    \n  \n\n    render() {\n        let userRole;\n        console.log(\"RENDERING New CHarac PAGE\");\n        if(this.state.redirect){\n            console.log(\"LOGIN PAGE REDIRECT IS TRUE\");\n            return <Redirect to={`/characters/${this.state.redirect}`}/>;\n        }\n        \n        return <div> <HeaderLinks/> \n          <main>\n        <form className= \"new-charac-form\" encType=\"multipart/form-data\" onSubmit={this.handleSubmit}>\n        <div className=\"new-charac-input-div\">\n\n        <div className=\"form-group-big\">\n\n            <div className=\"form-group\">\n                <label>\n                    Name:\n                    <input type=\"text\" className=\"form-control\" placeholder=\"Enter name\" name=\"name\" onChange={this.handleChange} required pattern=\"^(?=.{4,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n                </label>\n            </div>\n\n        <div className=\"form-group\">\n            <label >Full Name:\n                <input type=\"text\"  className=\"form-control\" placeholder=\"Enter Fullname\" name=\"fullname\" onChange={this.handleChange} required pattern=\"^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n            </label>\n        </div>\n\n        \n        <div className=\"form-group\">\n            <label >Age:\n                <input type=\"number\" min=\"1\" max=\"9999999\" name=\"age\" value={this.state.age} onChange={this.handleChange} required />\n            </label>\n        </div>\n\n        <div className=\"form-group\">\n            <label >Alias:\n                <input type=\"text\"  className=\"form-control\" placeholder=\"Enter Alias\" name=\"alias\" onChange={this.handleChange} required pattern=\"^(?=.{2,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$\"/>\n            </label>\n        </div>\n        \n    </div>\n    <div className=\"form-group-big\">\n             <legend>Description</legend>\n             <textarea name=\"description\" value={this.state.characDescr}  onChange={this.handleChange}></textarea>\n\n    </div>\n    <div className=\"form-group-big\">\n             <legend>Photo</legend>\n             <button type=\"button\" className=\"btn btn-info\">\n                <label htmlFor=\"createCharacImageInput\" >Choose a file</label>  \n             </button>\n             <div>\n                <img className=\"formPreviewImage\" src={this.state.imageUrl} alt=\"\" />\n             </div>\n             {/* Not Visible */}\n             <input type=\"file\" name=\"characPict\" id=\"createCharacImageInput\" ref={this.fileInput} onChange={this.handleFileInput} className=\"image-inputfile\"/>\n             \n\n\n    </div>\n    \n    </div>\n\n        <br/>\n        <hr/>\n    <input type=\"submit\" className=\"btn btn-primary\" value=\"Create new character\" />\n\n    </form>\n    </main>\n\n    </div>\n}\n}\n  \nexport default CreateCharacterPage;\n","import React, { Component } from \"react\";\nimport { Link } from 'react-router-dom'\nimport axios from 'axios';\nimport PageNavigation from \"../widgets/PageNavigation\"\nimport { Redirect } from \"react-router-dom\";\nimport {getCurrUserObj} from \"../myTools\"\nimport HeaderLinks from \"../HeaderLinks.js\"\n\nclass TitleCard extends Component{\n    render(){\n\n        let titleImg = this.props.title.image;\n        let titleName = this.props.title.name;\n        let titleId = this.props.title._id;\n\n        \n        return <div className=\"card border-dark mb-3\">\n            <div className=\"card-img-wrapper\">\n              <Link to={\"/titles/\" + titleId}>\n                <img src={`${titleImg}`} className=\"card-img-top\"  alt=\"...\"></img>\n              </Link>\n            </div>\n        \n            <div className=\"card-body justify-content-between\">\n            <h5 className=\"card-title\">{titleName}</h5>\n            <Link to={\"/titles/\" + titleId}>\n                <button className=\"btn btn-secondary\">Details</button>\n            </Link> \n            </div>\n        </div>\n    }\n}\n\n\n\nclass TitlesPage extends Component {\n  constructor( props ) {\n    super( props );\n\n    let currUser = getCurrUserObj();\n\n    this.state = {\n      query: '',\n      results: {},\n      error: '',\n      message: '',\n      loading: false,\n      totalResults: 0,\n      pagesCount: 0,\n      currentPageNo: 0,\n      userRole: currUser.role,\n      username: currUser.username,\n    };\n    this.cancel = '';\n  }\n\n  getPagesCount = (total, denominator) => {\n    const divisible = total % denominator === 0;\n    const valueToBeAdded = divisible ? 0 : 1;\n    return Math.floor(total / denominator) + valueToBeAdded;\n  };\n\n  handlePageClick = (type) => {\n    // event.preventDefault();\n    const updatedPageNo =\n            'prev' === type\n              ? this.state.currentPageNo - 1\n              : this.state.currentPageNo + 1;\n    if (!this.state.loading) {\n      this.setState({ loading: true, message: '' }, () => {\n        this.fetchSearchResults(updatedPageNo, this.state.query);\n      });\n    }\n  };\n\n  renderSearchResults = () => {\n    const {results, query} = this.state;\n    // console.log(\"state\");\n    // console.log(this.state);\n    \n    if (results && Object.keys(results).length && results.length) {\n\n      const cardsArray = results.map(title=>{\n        //console(\"CHARAC\");\n        //console(charac);\n        return <TitleCard title = {title}/>\n      });\n      return <div className=\"entities-wrapper\" id = \"characters-div\">{cardsArray}</div>;\n    \n    } else {\n        return <div className=\"alert alert-warning\">\n        <h2>  No results for <strong> {query}</strong></h2>\n      </div>\n    }\n  };\n\n  componentDidMount(){\n    this.fetchSearchResults(1, \"\");\n  }\n\n  handleOnInputChange = (event) => {\n    const query = event.target.value;\n    if (!query) {\n      this.setState({ query, results: {}, totalResults: 0, totalPages: 0, currentPageNo: 0, message: '' } );\n      this.fetchSearchResults(1, query);\n    } else {\n      this.setState({ query, loading: true, message: '' }, () => {\n        this.fetchSearchResults(1, query);\n      });\n    }\n  };\n    \n\n  fetchSearchResults = (pageNumber, query ) => {\n  // ${titleId ? `&title=${titleId}` : \"\"}\n  // By default the limit of results is 20\n    pageNumber = pageNumber || 1;\n    \n// const searchUrl = `https://pixabay.com/api/?key=12413278-79b713c7e196c7a3defb5330e&q=${query}${pageNumber}`;\n  const searchUrl = `/api/v1/titles?page=${pageNumber}${query? `&search=${query}` : \"\"}`;\n  //console(`Seach url: ${searchUrl}`);\n  if (this.cancel) {\n  // Cancel the previous request before making a new request\n    this.cancel.cancel();\n  }\n  \n\t// Create a new CancelToken\n\tthis.cancel = axios.CancelToken.source();\n\taxios\n\t\t.get(searchUrl, {\n      cancelToken: this.cancel.token,\n      headers: {\n        'Authorization': `Bearer ${localStorage.token}`,\n        'Content-Type': 'application/x-www-form-urlencoded'\n    },\n\t\t})\n\t\t.then((res) => {\n      //console(`Fetch res:`);\n      //console(res);\n\t\t\tconst resultNotFoundMsg = !res.data.resTitles.length\n\t\t\t\t? 'There are no more search results. Please try a new search.'\n        : '';\n\t\t\tthis.setState({\n        currentPageNo : pageNumber,\n        results: res.data.resTitles,\n        pagesCount: res.data.pagesAmount,\n\t\t\t\tmessage: resultNotFoundMsg,\n\t\t\t\tloading: false,\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tif (axios.isCancel(error) || error) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\tmessage: 'Failed to fetch results.Please check network',\n\t\t\t\t});\n\t\t\t}\n\t\t});\n  };\n\n\n  render() { \n    \n    const { query, loading,  currentPageNo, pagesCount, userRole} = this.state;\n// showPrevLink will be false, when on the 1st page, hence Prev link be shown on 1st page.\n    const showPrevLink = 1 < currentPageNo;\n// showNextLink will be false, when on the last page, hence Next link wont be shown last page.\n    const showNextLink = pagesCount > currentPageNo;\n    //console(showNextLink);\n    //console(pagesCount + \" total ==== curr  \" + currentPageNo);\n    if(userRole !== 1 && userRole !== 0 ){\n      return <Redirect to='/auth/login'/>;\n    }\n\n    return <div>\n    <HeaderLinks/>\n\n      <div className=\"filter-box\">\n        <aside className=\"filters\">\n          <p>Some filters here</p>\n        </aside>\n        <aside className=\"filters\">\n        <p>And here</p>\n      </aside>\n      </div>\n  \n      <main className=\"entities-main\">\n        \n    <input type=\"text\" name=\"search\" value={query} id=\"characSearch\" className= \"entitySearch\" placeholder=\"Search..\" onChange={this.handleOnInputChange}/>\n    \n    <div className=\"card-deck\">\n\n      {/* titles */}\n      { this.renderSearchResults() }\n\n    </div>\n    {/* PAGINATION */}\n       <PageNavigation\n        loading={loading}\n        showPrevLink={showPrevLink}\n        showNextLink={showNextLink}\n        currPage = {currentPageNo}\n        pagesCount = {pagesCount}\n        handlePrevClick={() => this.handlePageClick('prev')}\n        handleNextClick={() => this.handlePageClick('next')}/>\n      {this.state.userRole ===1 ?\n       <div className=\"adminButtons\">\n         \n         <p>Admin abilities:</p>\n        <Link to=\"/newTitle\" className=\"btn btn-success\">Create title</Link>\n        \n            <button type=\"button\" className=\"btn btn-info\" >\n            Some admin Feature</button>\n            <button type=\"button\" className=\"btn btn-warning\" >\n            Another admin Feature</button>\n            </div> : <></>}\n  </main>\n  </div>\n  }\n};\n\nexport default TitlesPage;\n\n","import React, { Component } from \"react\";\nimport axios from 'axios';\nimport ModalDelete from \"../widgets/ModalDelete\"\nimport { Link, Redirect } from \"react-router-dom\";\nimport HeaderLinks from \"../HeaderLinks.js\"\nimport {getCurrUserObj} from \"../myTools\"\n\nclass AdminTableElement extends Component{\n  constructor( props ) {\n    super( props );\n    this.state = {\n        charac : this.props.character,\n    };\n    this.cancel=\"\";\n\n  }\n  addCharClickHandler = event => {\n    event.preventDefault();    \n    // /admin/title/deleteCharac/:characId\n    this.cancel = axios.CancelToken.source();\n\n    const searchUrl = `/api/v1/admin/title/addCharac/${this.props.character._id}`;\n        fetch(searchUrl, {\n          method : \"post\",  \n          cancelToken: this.cancel.token,\n          headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          })\n          .then((res) => {\n            this.props.rerender();\n          })\n          .catch((error) => {\n          });\n  }\n  deleteCharClickHandler = event => {\n    event.preventDefault();    \n    const searchUrl = `/api/v1/admin/title/addCharac/${this.props.character._id}`;\n    console.log(searchUrl);\n        axios\n          .post(searchUrl, {\n\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          })\n          .then((res) => {\n             this.setState({\n              status: res.status  \n            });\n          })\n          .catch((error) => {\n          });\n  }\n  // /admin/title/deleteCharac/{{_id}}\n  render(){\n    return  <tr>\n    <td><Link to ={`/api/v1/characters/${this.props.character._id}`}>{this.props.character.name}</Link></td>\n    <td>{this.props.character.alias}</td>\n    <td>{this.props.character.titles[0]}</td>\n    <td>\n    { this.state.charac.titles.includes(this.props.titleId)\n        ?<form action=\"/admin/title/deleteCharac/{{_id}}\" method = \"POST\">\n        <p style={{display:\"none\"}}>B </p>\n        <input type=\"submit\" className=\"btn btn-danger\" value=\"Delete char\" onClick={this.deleteCharClickHandler}/>\n\n        </form>\n\n        :<form action=\"/admin/title/addCharac/{{_id}}\" method = \"POST\">\n        <p style={{display:\"none\"}}>A </p>\n        <input type=\"submit\" className=\"btn btn-primary\" value=\"Add char\" onClick={this.addCharClickHandler}/>\n\n    </form>\n        \n    }    \n    </td>\n  </tr>\n\n  }\n}\n\nclass AdminTable extends Component{\n  constructor( props ) {\n    super( props );\n    this.state = {\n      characters : [],\n      titleId : this.props.titleId,          \n    };\n    \n  }\n  componentDidMount(){\n    const searchUrl = `/api/v1/charactersGetAll`;\n        axios\n          .get(searchUrl, {\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          })\n          .then((res) => {\n\n             this.setState({\n              characters: res.data  \n            });\n          })\n          .catch((error) => {\n          });\n\n  }\n  rerenderTable = () =>{\n    console.log(\"Rerendering table\");\n    const searchUrl = `/api/v1/charactersGetAll`;\n        axios\n          .get(searchUrl, {\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          })\n          .then((res) => {\n\n             this.setState({\n              characters: res.data  \n            });\n          })\n          .catch((error) => {\n          });\n\n  }\n  renderSearchResults = () => {\n    const results = this.state.characters;\n    \n    \n    if (results && Object.keys(results).length && results.length) {\n\n      const cardsArray = results.map(charac=>{\n        // console.log(\"In map:\");\n        // console.log(charac);\n        return <AdminTableElement titleId={this.props.titleId} character={charac} rerender={this.rerenderTable}/>\n      });\n    return <tbody>{cardsArray}</tbody>\n    \n    } else {\n        return <thead><tr>\n        <th>  No characs</th></tr></thead>\n    }\n  };\n\n  render() {\n    return <div style = {{width : \"80%\"}}>\n    <button data-toggle=\"collapse\" data-target=\"#adminCollapse\" className= \"btn-success\">Admining</button>\n    <div id=\"adminCollapse\" className=\"collapse show\">\n\n        <div className=\"container\" width=\"100%\">\n            <table className=\"table table-striped table-bordered\" id=\"dataTable\" width=\"100%\" cellSpacing=\"0\">\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Alias</th>\n                        <th>Title Example</th>\n                        <th>Action</th>\n\n                    </tr>\n                </thead>\n                { this.renderSearchResults() }\n                \n            </table>\n        </div>\n    </div>\n</div>\n  }\n}\nclass TitlePage extends Component {\n    \n    constructor( props ) {\n        super( props );\n        let queryStrArr = this.props.location.pathname.split(\"/\");\n        let titleId = queryStrArr[queryStrArr.length - 1];\n        \n        \n        let currUser = getCurrUserObj();;\n\n        this.state = {\n          userRole: currUser.role,\n          titleId : titleId          \n        };\n        this.cancel=\"\";\n      }\n      componentDidMount(){\n        this.fetchSearchResults();\n      }\n    \n      fetchSearchResults = () => {\n        const searchUrl = `/api/v1/titles/${this.state.titleId}`;\n        \n        if (this.cancel) {\n          this.cancel.cancel();\n        }\n\n        this.cancel = axios.CancelToken.source();\n        axios\n          .get(searchUrl, {\n            cancelToken: this.cancel.token,\n            headers: {\n              'Authorization': `Bearer ${localStorage.token}`,\n              'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          })\n          .then((res) => {\n            console.log(res);\n             this.setState({\n              title: res.data  \n            });\n          })\n          .catch((error) => {\n          });\n        };\n\n\n\n  render() { \n    if(!this.state.title){\n      return <div><h1>ERROR</h1></div>\n    }\n    //console(this.state);\n    const title = this.state.title;\n    //console(charac);\n    // const { query } = this.state;\n    // //console(\"Render Query:\");\n    // //console(query);\n    // const name = this.props.charac.name;\n    // const image = this.props.charac.image;\n    // const fullname = this.props.charac.fullname;\n    // const registredAt = this.props.charac.registredAt;\n    // const content = `CONTENT HERE `\n    //console(\"CHARACTER PAGE LOAD\");\n    // const isAdmin = this.props.charac.isAdmin;\n    return <div>\n      <HeaderLinks/>\n      <main>\n    <h2>{`${title.name}`}</h2>\n    <div className=\"entitiy-page-wrapper\">\n\n        <div className=\"entity-page-image\">\n            <img src={title.image} alt=\"\"/>\n        </div>\n\n        <div className=\"entity-page-info\">\n            <div className=\"table\">\n                <table>\n                  <tbody>\n\n                    <tr>\n                        <td>name:</td>\n                        <td>{title.name}</td>\n                    </tr>\n                    <tr>\n                        <td>Year of publishing:</td>\n                        <td>{title.yearOfPublishing}</td>\n                    </tr>\n                    <tr>\n                        <td>Was added:</td>\n                        <td>{new Date(title.addedAt).toDateString()}</td>\n                    </tr>\n                    </tbody>\n\n                </table>\n            </div>\n            <div className=\"table\">\n                <table>\n                  <tbody>\n                    <tr>\n                        <td>Rating:</td>\n                        <td>{title.reting}</td>\n                    </tr>\n                    <tr>\n                        <td>Info:</td>\n                        <td>---</td>\n                    </tr>\n                    <tr>\n                        <td>Info:</td>\n                        <td>---</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n\n\n        <div className=\"entity-page-footer\">\n            <p>Some other text and abilities here without border and block</p>\n        </div>\n\n\n        {this.state.userRole===1 ?\n          <div className=\"adminButtons\">\n            <p>Admin abilities:</p>\n            \n            <button type=\"button\" className=\"btn btn-danger\" data-toggle=\"modal\" data-target=\"#exampleModalCenter\">\n              Delete title</button>\n\n              <button type=\"button\" className=\"btn btn-warning\"><Link to={`/updateTitle/${title._id}`}>Update Title</Link></button>\n          </div> \n          \n          : <></>}\n          {this.state.userRole===1 ?\n          <div className=\"adminButtons\">\n            <AdminTable titleId ={title._id}/>\n          </div>\n          \n          : <></>}\n\n\n      </div>\n\n</main>\n    {this.state.userRole===1 ? <ModalDelete entityName={`title ${title.name}`}\n                                            targetApiUrl={`/api/v1/titles/${title._id}`}\n                                            returnLink={`/titles`}\n    /> : <></>}\n</div>\n  }\n};\n\nexport default TitlePage;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom'\nimport Header from \"./components/widgets/Header\"\n\n\nReactDOM.render(\n    <BrowserRouter>\n    <Header></Header>\n    <App />\n    </BrowserRouter>\n, document.getElementById('root'));\n\n\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport default function Header(props) {\n        return (\n        <header>\n            <h1>Anime Fanbase</h1>\n        </header>)\n}\n\n","import React from \"react\";\nimport \"./App.css\";\n\n\nimport { Route, Switch } from 'react-router-dom'\n// We will create these two pages in a moment\nimport IndexPage from './components/IndexPage'\nimport AboutPage from './components/AboutPage'\nimport RegisterPage from \"./components/RegisterPage\"\nimport LoginPage from './components/LoginPage'\n\n// USERS\nimport UsersPage from \"./components/user/UsersPage\"\nimport UserPage from \"./components/user/UserPage\"\nimport UpdateUserPage from \"./components/user/updateUser\"\n\n// CHARAC\nimport CreateCharacterPage from \"./components/character/NewCharacterPage\"\nimport UpdateCharacterPage from \"./components/character/updateCharacter\"\nimport CharactersPage from './components/character/CharactersPage'\nimport CharacterPage from './components/character/CharacterPage'\n// TITLE\nimport CreateTitlePage from \"./components/title/NewTitlePage\"\nimport TitlesPage from './components/title/TitlesPage'\nimport TitlePage from './components/title/TitlePage'\n\n\nexport default function App() {\n  return (\n    <div>\n\n    <Switch>\n      {/* Static */}\n      <Route exact path=\"/\" component={IndexPage} />\n      <Route exact path=\"/about\" component={AboutPage} />\n      \n      {/* AUTH */}\n      <Route exact path=\"/auth/login\" component={LoginPage} />\n      <Route exact path=\"/auth/register\" component={RegisterPage} />\n      \n\n      {/* Character */}\n      <Route exact path=\"/characters\" component={CharactersPage} />\n      <Route exact path=\"/characters/:id\" component={CharacterPage} />\n      <Route exact path=\"/newCharacter\" component={CreateCharacterPage} />\n      <Route exact path=\"/updateCharacter/:id\" component={UpdateCharacterPage} />\n\n      {/* Titles */}\n      <Route exact path=\"/titles\" component={TitlesPage} />\n      <Route exact path=\"/titles/:id\" component={TitlePage} />\n      <Route exact path=\"/newTitle\" component={CreateTitlePage} />\n\n\n      {/* USERS */}\n      <Route exact path=\"/users/:id\" component={UserPage} />\n      <Route exact path=\"/updateUser/:id\" component={UpdateUserPage} />\n      <Route exact path=\"/users\" component={UsersPage} />\n\n\n\n      <Route exact path=\"/newTitle\" component={CharactersPage} />\n      <Route exact path=\"/titles/:id\" component={CharacterPage} />\n      <Route exact path=\"/titles\" component={CharactersPage} />\n      <Route exact path=\"/users\" component={CharactersPage} />\n\n\n\n      {/* <Route path=\"/:id\" component={UserPage} /> */}\n    </Switch>\n    </div>\n  )\n}\n"],"sourceRoot":""}